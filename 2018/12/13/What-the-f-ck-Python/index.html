<!DOCTYPE html>
<html lang="zh-Hans">
<head>
  <meta charset="utf-8">
  
  <title>What the f*ck Python | WSC_ZOU_Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="What the f*ck Python ğŸ â€”â€” ä¸€äº›Pythonçš„ç‰¹æ€§ â€‹														å‚è€ƒ(https://github.com/leisurelicht/wtfpython-cn)  ğŸ˜start your Journeyï¼š Strings can be tricky sometimes/å¾®å¦™çš„å­—ç¬¦ä¸²*  123456&amp;gt; &amp;gt;&amp;gt;&amp;gt; a = &quot;some">
<meta property="og:type" content="article">
<meta property="og:title" content="What the f*ck Python">
<meta property="og:url" content="http://WSCZou.com/2018/12/13/What-the-f-ck-Python/index.html">
<meta property="og:site_name" content="WSC_ZOU_Blog">
<meta property="og:description" content="What the f*ck Python ğŸ â€”â€” ä¸€äº›Pythonçš„ç‰¹æ€§ â€‹														å‚è€ƒ(https://github.com/leisurelicht/wtfpython-cn)  ğŸ˜start your Journeyï¼š Strings can be tricky sometimes/å¾®å¦™çš„å­—ç¬¦ä¸²*  123456&amp;gt; &amp;gt;&amp;gt;&amp;gt; a = &quot;some">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="https://github.com/leisurelicht/wtfpython-cn/raw/master/images/string-intern/string_intern.png">
<meta property="og:image" content="https://github.com/leisurelicht/wtfpython-cn/raw/master/images/tic-tac-toe/after_row_initialized.png">
<meta property="og:image" content="https://github.com/leisurelicht/wtfpython-cn/raw/master/images/tic-tac-toe/after_board_initialized.png">
<meta property="og:updated_time" content="2019-02-25T12:07:47.722Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="What the f*ck Python">
<meta name="twitter:description" content="What the f*ck Python ğŸ â€”â€” ä¸€äº›Pythonçš„ç‰¹æ€§ â€‹														å‚è€ƒ(https://github.com/leisurelicht/wtfpython-cn)  ğŸ˜start your Journeyï¼š Strings can be tricky sometimes/å¾®å¦™çš„å­—ç¬¦ä¸²*  123456&amp;gt; &amp;gt;&amp;gt;&amp;gt; a = &quot;some">
<meta name="twitter:image" content="https://github.com/leisurelicht/wtfpython-cn/raw/master/images/string-intern/string_intern.png">
  
  
    <link rel="icon" href="/favicon.ico">
  
  <link rel="stylesheet" href="/css/typing.css">
  <link rel="stylesheet" href="/css/donate.css">
  
</head>

  
    
      <body>
    
  
      <div id="container" class="container">
        <article id="post-What-the-f-ck-Python" class="article article-type-post" itemscope itemprop="blogPost">
  <header id="header" class="header">
  <nav class="mobile-nav">
    <h1 class="nickname">WSC_Zou</h1>
    <ul class="mobile-nav-menu">
      <label for="mobile-menu-toggle"><a>&#9776; Menu</a></label>
      <input type="checkbox" id="mobile-menu-toggle"/>
      <ul class="mobile-nav-link">
        
        <a href="/">Home</a>
        
        <a href="/archives">Archives</a>
        
        <a href="/about">About</a>
        
      </ul>
    </ul>
  </nav>
	
		<nav id="main-nav" class="main-nav nav-left">
	
	
	  <a class="main-nav-link" href="/">Home</a>
	
	  <a class="main-nav-link" href="/archives">Archives</a>
	
	  <a class="main-nav-link" href="/about">About</a>
	
  </nav>
</header>

  <hr/>
  <div class="article-inner">
    

    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      What the f*ck Python
    </h1>
  

      </header>
    
    <div class="article-entry typo" itemprop="articleBody">
      
        <h1>What the f*ck Python ğŸ</h1>
<h2 id="ä¸€äº›pythonçš„ç‰¹æ€§">â€”â€” ä¸€äº›Pythonçš„ç‰¹æ€§</h2>
<p>â€‹														å‚è€ƒ(<a href="https://github.com/leisurelicht/wtfpython-cn" target="_blank" rel="noopener">https://github.com/leisurelicht/wtfpython-cn</a>)</p>
<hr>
<p>ğŸ˜start your Journeyï¼š</p>
<p>Strings can be tricky sometimes/å¾®å¦™çš„å­—ç¬¦ä¸²*</p>
<blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt; &gt;&gt;&gt; a = <span class="string">"some_string"</span></span><br><span class="line">&gt; &gt;&gt;&gt; id(a)</span><br><span class="line">&gt; <span class="number">140420665652016</span></span><br><span class="line">&gt; &gt;&gt;&gt; id(<span class="string">"some"</span> + <span class="string">"_"</span> + <span class="string">"string"</span>) <span class="comment"># æ³¨æ„ä¸¤ä¸ªçš„idå€¼æ˜¯ç›¸åŒçš„.</span></span><br><span class="line">&gt; <span class="number">140420665652016</span></span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&gt; &gt;&gt;&gt; a = <span class="string">"wtf"</span></span><br><span class="line">&gt; &gt;&gt;&gt; b = <span class="string">"wtf"</span></span><br><span class="line">&gt; &gt;&gt;&gt; a <span class="keyword">is</span> b</span><br><span class="line">&gt; <span class="keyword">True</span></span><br><span class="line">&gt; </span><br><span class="line">&gt; &gt;&gt;&gt; a = <span class="string">"wtf!"</span></span><br><span class="line">&gt; &gt;&gt;&gt; b = <span class="string">"wtf!"</span></span><br><span class="line">&gt; &gt;&gt;&gt; a <span class="keyword">is</span> b</span><br><span class="line">&gt; <span class="keyword">False</span></span><br><span class="line">&gt; </span><br><span class="line">&gt; &gt;&gt;&gt; a, b = <span class="string">"wtf!"</span>, <span class="string">"wtf!"</span></span><br><span class="line">&gt; &gt;&gt;&gt; a <span class="keyword">is</span> b</span><br><span class="line">&gt; <span class="keyword">True</span></span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt; &gt;&gt;&gt; <span class="string">'a'</span> * <span class="number">20</span> <span class="keyword">is</span> <span class="string">'aaaaaaaaaaaaaaaaaaaa'</span></span><br><span class="line">&gt; <span class="keyword">True</span></span><br><span class="line">&gt; &gt;&gt;&gt; <span class="string">'a'</span> * <span class="number">21</span> <span class="keyword">is</span> <span class="string">'aaaaaaaaaaaaaaaaaaaaa'</span></span><br><span class="line">&gt; <span class="keyword">False</span></span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
<p>ğŸ’¡<strong>æç¤º</strong></p>
<ul>
<li>è¿™äº›è¡Œä¸ºæ˜¯ç”±äº Cpython åœ¨ç¼–è¯‘ä¼˜åŒ–æ—¶, æŸäº›æƒ…å†µä¸‹ä¼šå°è¯•ä½¿ç”¨å·²ç»å­˜åœ¨çš„ä¸å¯å˜å¯¹è±¡è€Œä¸æ˜¯æ¯æ¬¡éƒ½åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡. (è¿™ç§è¡Œä¸ºè¢«ç§°ä½œå­—ç¬¦ä¸²çš„é©»ç•™[string interning])</li>
<li>å‘ç”Ÿé©»ç•™ä¹‹å, è®¸å¤šå˜é‡å¯èƒ½æŒ‡å‘å†…å­˜ä¸­çš„ç›¸åŒå­—ç¬¦ä¸²å¯¹è±¡. (ä»è€ŒèŠ‚çœå†…å­˜)</li>
<li>åœ¨ä¸Šé¢çš„ä»£ç ä¸­, å­—ç¬¦ä¸²æ˜¯éšå¼é©»ç•™çš„. ä½•æ—¶å‘ç”Ÿéšå¼é©»ç•™åˆ™å–å†³äºå…·ä½“çš„å®ç°. è¿™é‡Œæœ‰ä¸€äº›æ–¹æ³•å¯ä»¥ç”¨æ¥çŒœæµ‹å­—ç¬¦ä¸²æ˜¯å¦ä¼šè¢«é©»ç•™:
<ul>
<li>æ‰€æœ‰é•¿åº¦ä¸º 0 å’Œé•¿åº¦ä¸º 1 çš„å­—ç¬¦ä¸²éƒ½è¢«é©»ç•™.</li>
<li>å­—ç¬¦ä¸²åœ¨ç¼–è¯‘æ—¶è¢«å®ç° (<code>'wtf'</code> å°†è¢«é©»ç•™, ä½†æ˜¯ <code>''.join(['w', 't', 'f']</code> å°†ä¸ä¼šè¢«é©»ç•™)</li>
<li>å­—ç¬¦ä¸²ä¸­åªåŒ…å«å­—æ¯ï¼Œæ•°å­—æˆ–ä¸‹åˆ’çº¿æ—¶å°†ä¼šé©»ç•™. æ‰€ä»¥ <code>'wtf!'</code> ç”±äºåŒ…å« <code>!</code> è€Œæœªè¢«é©»ç•™. å¯ä»¥åœ¨<a href="https://github.com/python/cpython/blob/3.6/Objects/codeobject.c#L19" target="_blank" rel="noopener">è¿™é‡Œ</a>æ‰¾åˆ° CPython å¯¹æ­¤è§„åˆ™çš„å®ç°.</li>
<li><img src="https://github.com/leisurelicht/wtfpython-cn/raw/master/images/string-intern/string_intern.png" alt="img"></li>
<li>å½“åœ¨åŒä¸€è¡Œå°† <code>a</code> å’Œ <code>b</code> çš„å€¼è®¾ç½®ä¸º <code>&quot;wtf!&quot;</code> çš„æ—¶å€™, Python è§£é‡Šå™¨ä¼šåˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡, ç„¶ååŒæ—¶å¼•ç”¨ç¬¬äºŒä¸ªå˜é‡. å¦‚æœä½ åœ¨ä¸åŒçš„è¡Œä¸Šè¿›è¡Œèµ‹å€¼æ“ä½œ, å®ƒå°±ä¸ä¼šâ€œçŸ¥é“â€å·²ç»æœ‰ä¸€ä¸ª <code>wtfï¼</code> å¯¹è±¡ (å› ä¸º <code>&quot;wtf!&quot;</code> ä¸æ˜¯æŒ‰ç…§ä¸Šé¢æåˆ°çš„æ–¹å¼è¢«éšå¼é©»ç•™çš„). å®ƒæ˜¯ä¸€ç§ç¼–è¯‘å™¨ä¼˜åŒ–, ç‰¹åˆ«é€‚ç”¨äºäº¤äº’å¼ç¯å¢ƒ.</li>
<li>å¸¸é‡æŠ˜å (constant folding) æ˜¯ Python ä¸­çš„ä¸€ç§ <a href="https://en.wikipedia.org/wiki/Peephole_optimization" target="_blank" rel="noopener">çª¥å­”ä¼˜åŒ–(peephole optimization)</a> æŠ€æœ¯. è¿™æ„å‘³ç€åœ¨ç¼–è¯‘æ—¶è¡¨è¾¾å¼ <code>'a'*20</code>ä¼šè¢«æ›¿æ¢ä¸º <code>'aaaaaaaaaaaaaaaaaaaa'</code> ä»¥å‡å°‘è¿è¡Œæ—¶çš„æ—¶é’Ÿå‘¨æœŸ. åªæœ‰é•¿åº¦å°äº 20 çš„å­—ç¬¦ä¸²æ‰ä¼šå‘ç”Ÿå¸¸é‡æŠ˜å . (ä¸ºå•¥? æƒ³è±¡ä¸€ä¸‹ç”±äºè¡¨è¾¾å¼ <code>'a'*10**10</code> è€Œç”Ÿæˆçš„ <code>.pyc</code> æ–‡ä»¶çš„å¤§å°). ç›¸å…³çš„æºç å®ç°åœ¨<a href="https://github.com/python/cpython/blob/3.6/Python/peephole.c#L288" target="_blank" rel="noopener">è¿™é‡Œ</a>.</li>
</ul>
</li>
</ul>
</blockquote>
<hr>
<p>**&gt;Time for some hash brownies!/æ˜¯æ—¶å€™æ¥ç‚¹è›‹ç³•äº†!â€‹ **</p>
<blockquote>
<ul>
<li>hash brownieæŒ‡ä¸€ç§å«æœ‰å¤§éº»æˆåˆ†çš„è›‹ç³•, æ‰€ä»¥è¿™é‡Œæ˜¯å¥åŒå…³</li>
</ul>
<ol>
<li></li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt; some_dict = &#123;&#125;</span><br><span class="line">&gt; some_dict[<span class="number">5.5</span>] = <span class="string">"Ruby"</span></span><br><span class="line">&gt; some_dict[<span class="number">5.0</span>] = <span class="string">"JavaScript"</span></span><br><span class="line">&gt; some_dict[<span class="number">5</span>] = <span class="string">"Python"</span></span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
<p><strong>Output:</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&gt; &gt;&gt;&gt; some_dict[<span class="number">5.5</span>]</span><br><span class="line">&gt; <span class="string">"Ruby"</span></span><br><span class="line">&gt; &gt;&gt;&gt; some_dict[<span class="number">5.0</span>]</span><br><span class="line">&gt; <span class="string">"Python"</span></span><br><span class="line">&gt; &gt;&gt;&gt; some_dict[<span class="number">5</span>]</span><br><span class="line">&gt; <span class="string">"Python"</span></span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
<h4 id="ğŸ’¡-æç¤º">ğŸ’¡ æç¤º:</h4>
<ul>
<li>
<p>Python å­—å…¸é€šè¿‡æ£€æŸ¥é”®å€¼æ˜¯å¦ç›¸ç­‰å’Œæ¯”è¾ƒå“ˆå¸Œå€¼æ¥ç¡®å®šä¸¤ä¸ªé”®æ˜¯å¦ç›¸åŒ.</p>
</li>
<li>
<p>å…·æœ‰ç›¸åŒå€¼çš„ä¸å¯å˜å¯¹è±¡åœ¨Pythonä¸­å§‹ç»ˆå…·æœ‰ç›¸åŒçš„å“ˆå¸Œå€¼.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;   &gt;&gt;&gt; <span class="number">5</span> == <span class="number">5.0</span></span><br><span class="line">&gt;   <span class="keyword">True</span></span><br><span class="line">&gt;   &gt;&gt;&gt; hash(<span class="number">5</span>) == hash(<span class="number">5.0</span>)</span><br><span class="line">&gt;   <span class="keyword">True</span></span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</blockquote>
<blockquote>
<p>æ³¨æ„:</p>
<p>å…·æœ‰ä¸åŒå€¼çš„å¯¹è±¡ä¹Ÿå¯èƒ½å…·æœ‰ç›¸åŒçš„å“ˆå¸Œå€¼ï¼ˆå“ˆå¸Œå†²çªï¼‰.</p>
<ul>
<li>
<p>å½“æ‰§è¡Œ <code>some_dict[5] = &quot;Python&quot;</code> è¯­å¥æ—¶, å› ä¸ºPythonå°† <code>5</code> å’Œ <code>5.0</code> è¯†åˆ«ä¸º <code>some_dict</code> çš„åŒä¸€ä¸ªé”®, æ‰€ä»¥å·²æœ‰å€¼ â€œJavaScriptâ€ å°±è¢« â€œPythonâ€ è¦†ç›–äº†.</p>
</li>
<li>
<p>è¿™ä¸ª StackOverflowçš„ <a href="https://stackoverflow.com/a/32211042/4354153" target="_blank" rel="noopener">å›ç­”</a> æ¼‚äº®çš„è§£é‡Šäº†è¿™èƒŒåçš„åŸºæœ¬åŸç†.</p>
</li>
</ul>
</blockquote>
<blockquote>
<p>Return return everywhere!/åˆ°å¤„è¿”å›!</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="function"><span class="keyword">def</span> <span class="title">some_func</span><span class="params">()</span>:</span></span><br><span class="line">&gt; 	<span class="keyword">try</span>:</span><br><span class="line">&gt; 		<span class="keyword">return</span> <span class="string">'from_try'</span></span><br><span class="line">&gt; 	<span class="keyword">finally</span>:</span><br><span class="line">&gt; 		<span class="keyword">return</span> <span class="string">'from_finally'</span></span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
<p>Output:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt; &gt;&gt;&gt;some_func()</span><br><span class="line">&gt; <span class="string">'from_finally'</span></span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
<h4 id="ğŸ’¡-è¯´æ˜">ğŸ’¡ è¯´æ˜:</h4>
<ul>
<li>å½“åœ¨ â€œtryâ€¦finallyâ€ è¯­å¥çš„ <code>try</code> ä¸­æ‰§è¡Œ <code>return</code>, <code>break</code> æˆ– <code>continue</code> å, <code>finally</code> å­å¥ä¾ç„¶ä¼šæ‰§è¡Œ.</li>
<li>å‡½æ•°çš„è¿”å›å€¼ç”±æœ€åæ‰§è¡Œçš„ <code>return</code> è¯­å¥å†³å®š. ç”±äº <code>finally</code> å­å¥ä¸€å®šä¼šæ‰§è¡Œ, æ‰€ä»¥ <code>finally</code> å­å¥ä¸­çš„ <code>return</code> å°†å§‹ç»ˆæ˜¯æœ€åæ‰§è¡Œçš„è¯­å¥.</li>
</ul>
</blockquote>
<hr>
<p><strong>&gt;Deep down, weâ€™re all the same./æœ¬è´¨ä¸Šï¼Œæˆ‘ä»¬éƒ½ä¸€æ ·.</strong></p>
<blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="class"><span class="keyword">class</span> <span class="title">WTF</span>:</span></span><br><span class="line">&gt; 	<span class="keyword">pass</span></span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
<p>Output:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&gt; &gt;&gt;&gt; WTF() == WTF() <span class="comment"># ä¸¤ä¸ªä¸åŒçš„å¯¹è±¡åº”è¯¥ä¸ç›¸ç­‰</span></span><br><span class="line">&gt; <span class="keyword">False</span></span><br><span class="line">&gt; &gt;&gt;&gt; WTF() <span class="keyword">is</span> WTF() <span class="comment"># ä¹Ÿä¸ç›¸åŒ</span></span><br><span class="line">&gt; <span class="keyword">False</span></span><br><span class="line">&gt; &gt;&gt;&gt; hash(WTF()) == hash(WTF()) <span class="comment"># å“ˆå¸Œå€¼ä¹Ÿåº”è¯¥ä¸åŒ</span></span><br><span class="line">&gt; <span class="keyword">True</span></span><br><span class="line">&gt; &gt;&gt;&gt; id(WTF()) == id(WTF())</span><br><span class="line">&gt; <span class="keyword">True</span></span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
<h4 id="ğŸ’¡-è¯´æ˜-v2">ğŸ’¡ è¯´æ˜:</h4>
<ul>
<li>
<p>å½“è°ƒç”¨ <code>id</code> å‡½æ•°æ—¶, Python åˆ›å»ºäº†ä¸€ä¸ª <code>WTF</code> ç±»çš„å¯¹è±¡å¹¶ä¼ ç»™ <code>id</code> å‡½æ•°. ç„¶å <code>id</code> å‡½æ•°è·å–å…¶idå€¼ (ä¹Ÿå°±æ˜¯å†…å­˜åœ°å€), ç„¶åä¸¢å¼ƒè¯¥å¯¹è±¡. è¯¥å¯¹è±¡å°±è¢«é”€æ¯äº†.</p>
</li>
<li>
<p>å½“æˆ‘ä»¬è¿ç»­ä¸¤æ¬¡è¿›è¡Œè¿™ä¸ªæ“ä½œæ—¶, Pythonä¼šå°†ç›¸åŒçš„å†…å­˜åœ°å€åˆ†é…ç»™ç¬¬äºŒä¸ªå¯¹è±¡. å› ä¸º (åœ¨CPythonä¸­) <code>id</code> å‡½æ•°ä½¿ç”¨å¯¹è±¡çš„å†…å­˜åœ°å€ä½œä¸ºå¯¹è±¡çš„idå€¼, æ‰€ä»¥ä¸¤ä¸ªå¯¹è±¡çš„idå€¼æ˜¯ç›¸åŒçš„.</p>
</li>
<li>
<p>ç»¼ä¸Š, å¯¹è±¡çš„idå€¼ä»…ä»…åœ¨å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸå†…å”¯ä¸€. åœ¨å¯¹è±¡è¢«é”€æ¯ä¹‹å, æˆ–è¢«åˆ›å»ºä¹‹å‰, å…¶ä»–å¯¹è±¡å¯ä»¥å…·æœ‰ç›¸åŒçš„idå€¼.</p>
</li>
<li>
<p>é‚£ä¸ºä»€ä¹ˆ <code>is</code> æ“ä½œçš„ç»“æœä¸º <code>False</code> å‘¢? è®©æˆ‘ä»¬çœ‹çœ‹è¿™æ®µä»£ç .</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;   <span class="class"><span class="keyword">class</span> <span class="title">WTF</span><span class="params">(object)</span>:</span></span><br><span class="line">&gt;     <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span> print(<span class="string">"I"</span>)</span><br><span class="line">&gt;     <span class="function"><span class="keyword">def</span> <span class="title">__del__</span><span class="params">(self)</span>:</span> print(<span class="string">"D"</span>)</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</blockquote>
<blockquote>
<p><strong>Output:</strong></p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&gt;   &gt;&gt;&gt; WTF() <span class="keyword">is</span> WTF()</span><br><span class="line">&gt;   I</span><br><span class="line">&gt;   I</span><br><span class="line">&gt;   D</span><br><span class="line">&gt;   D</span><br><span class="line">&gt;   <span class="keyword">False</span></span><br><span class="line">&gt;   &gt;&gt;&gt; id(WTF()) == id(WTF())</span><br><span class="line">&gt;   I</span><br><span class="line">&gt;   D</span><br><span class="line">&gt;   I</span><br><span class="line">&gt;   D</span><br><span class="line">&gt;   <span class="keyword">True</span></span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
<p>æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„, å¯¹è±¡é”€æ¯çš„é¡ºåºæ˜¯é€ æˆæ‰€æœ‰ä¸åŒä¹‹å¤„çš„åŸå› .</p>
<p>å¦‚æœçœ‹å®Œè¿˜æ˜¯äº‘é‡Œé›¾é‡Œï¼šè¯·çœ‹ <a href="https://www.jb51.net/article/60360.htm" target="_blank" rel="noopener">https://www.jb51.net/article/60360.htm</a></p>
</blockquote>
<hr>
<h3 id="for-what-ä¸ºä»€ä¹ˆ">&gt; For what?/ä¸ºä»€ä¹ˆ?</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">some_string = <span class="string">"wtf"</span></span><br><span class="line">some_dict = &#123;&#125;</span><br><span class="line"><span class="keyword">for</span> i, some_dict[i] <span class="keyword">in</span> enumerate(some_string):</span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>
<p><strong>Output:</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>some_dict <span class="comment"># åˆ›å»ºäº†ç´¢å¼•å­—å…¸.</span></span><br><span class="line">&#123;<span class="number">0</span>: <span class="string">'w'</span>, <span class="number">1</span>: <span class="string">'t'</span>, <span class="number">2</span>: <span class="string">'f'</span>&#125;</span><br></pre></td></tr></table></figure>
<h4 id="ğŸ’¡-è¯´æ˜-v3">ğŸ’¡ è¯´æ˜:</h4>
<ul>
<li>
<p><a href="https://docs.python.org/3/reference/grammar.html" target="_blank" rel="noopener">Python è¯­æ³•</a> ï¼ˆå¦‚æœå¯¹è‹±æ–‡æ–‡æ¡£åƒåŠ›çš„åŒ–æ¨èçœ‹ <a href="https://docspy3zh.readthedocs.io/en/latest/reference/compound_stmts.html#for" target="_blank" rel="noopener">forè¯­å¥</a>ï¼‰ä¸­å¯¹ <code>for</code> çš„å®šä¹‰æ˜¯:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">for_stmt: <span class="string">'for'</span> exprlist <span class="string">'in'</span> testlist <span class="string">':'</span> suite [<span class="string">'else'</span> <span class="string">':'</span> suite]</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­ <code>exprlist</code> æŒ‡åˆ†é…ç›®æ ‡. è¿™æ„å‘³ç€å¯¹å¯è¿­ä»£å¯¹è±¡ä¸­çš„<strong>æ¯ä¸€é¡¹éƒ½ä¼šæ‰§è¡Œ</strong>ç±»ä¼¼ <code>{exprlist} = {next_value}</code> çš„æ“ä½œ.</p>
<p>ä¸€ä¸ªæœ‰è¶£çš„ä¾‹å­è¯´æ˜äº†è¿™ä¸€ç‚¹:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">4</span>):</span><br><span class="line">    print(i)</span><br><span class="line">    i = <span class="number">10</span></span><br></pre></td></tr></table></figure>
<p><strong>Output:</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br></pre></td></tr></table></figure>
<p>ä½ å¯æ›¾è§‰å¾—è¿™ä¸ªå¾ªç¯åªä¼šè¿è¡Œä¸€æ¬¡?</p>
<p><strong>ğŸ’¡ è¯´æ˜:</strong></p>
<ul>
<li>ç”±äºå¾ªç¯åœ¨Pythonä¸­å·¥ä½œæ–¹å¼, èµ‹å€¼è¯­å¥ <code>i = 10</code> å¹¶ä¸ä¼šå½±å“è¿­ä»£å¾ªç¯, åœ¨æ¯æ¬¡è¿­ä»£å¼€å§‹ä¹‹å‰, è¿­ä»£å™¨(è¿™é‡ŒæŒ‡ <code>range(4)</code>) ç”Ÿæˆçš„ä¸‹ä¸€ä¸ªå…ƒç´ å°±è¢«è§£åŒ…å¹¶èµ‹å€¼ç»™ç›®æ ‡åˆ—è¡¨çš„å˜é‡(è¿™é‡ŒæŒ‡ <code>i</code>)äº†.</li>
</ul>
</li>
<li>
<p>åœ¨æ¯ä¸€æ¬¡çš„è¿­ä»£ä¸­, <code>enumerate(some_string)</code> å‡½æ•°å°±ç”Ÿæˆä¸€ä¸ªæ–°å€¼ <code>i</code> (è®¡æ•°å™¨å¢åŠ ) å¹¶ä» <code>some_string</code> ä¸­è·å–ä¸€ä¸ªå­—ç¬¦. ç„¶åå°†å­—å…¸ <code>some_dict</code> é”® <code>i</code> (åˆšåˆšåˆ†é…çš„) çš„å€¼è®¾ä¸ºè¯¥å­—ç¬¦. æœ¬ä¾‹ä¸­å¾ªç¯çš„å±•å¼€å¯ä»¥ç®€åŒ–ä¸º:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>i, some_dict[i] = (<span class="number">0</span>, <span class="string">'w'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>i, some_dict[i] = (<span class="number">1</span>, <span class="string">'t'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>i, some_dict[i] = (<span class="number">2</span>, <span class="string">'f'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>some_dict</span><br></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<h3 id="evaluation-time-discrepancy-æ‰§è¡Œæ—¶æœºå·®å¼‚">&gt; Evaluation time discrepancy/æ‰§è¡Œæ—¶æœºå·®å¼‚</h3>
<ol>
<li></li>
</ol>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">array = [<span class="number">1</span>, <span class="number">8</span>, <span class="number">15</span>]</span><br><span class="line">g = (x <span class="keyword">for</span> x <span class="keyword">in</span> array <span class="keyword">if</span> array.count(x) &gt; <span class="number">0</span>)</span><br><span class="line">array = [<span class="number">2</span>, <span class="number">8</span>, <span class="number">22</span>]</span><br></pre></td></tr></table></figure>
<p><strong>Output:</strong></p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(list(g))</span><br><span class="line">[<span class="number">8</span>]</span><br></pre></td></tr></table></figure>
<ol start="2">
<li></li>
</ol>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">array_1 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line">g1 = (x <span class="keyword">for</span> x <span class="keyword">in</span> array_1)</span><br><span class="line">array_1 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br><span class="line"></span><br><span class="line">array_2 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line">g2 = (x <span class="keyword">for</span> x <span class="keyword">in</span> array_2)</span><br><span class="line">array_2[:] = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br></pre></td></tr></table></figure>
<p><strong>Output:</strong></p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(list(g1))</span><br><span class="line">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(list(g2))</span><br><span class="line">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br></pre></td></tr></table></figure>
<h4 id="ğŸ’¡-è¯´æ˜-v4">ğŸ’¡ è¯´æ˜</h4>
<ul>
<li>
<p>åœ¨<a href="https://wiki.python.org/moin/Generators" target="_blank" rel="noopener">ç”Ÿæˆå™¨</a>è¡¨è¾¾å¼ä¸­, <code>in</code> å­å¥åœ¨å£°æ˜æ—¶æ‰§è¡Œ, è€Œæ¡ä»¶å­å¥åˆ™æ˜¯åœ¨è¿è¡Œæ—¶æ‰§è¡Œ.</p>
<p>å¯¹ä¸Šé¢ä¸€å¥çš„è§£é‡Šï¼š</p>
<p>â€‹	åœ¨ç¬¬ä¸€ä¸ªä¾‹å­ä¸­ï¼Œ<code>x for x in array</code>å†™å‡ºæ¥çš„æ—¶å€™å°±æ‰§è¡Œäº†ï¼Œè€Œåé¢çš„ <code>if array.count(x) &gt; 0</code> åˆ™æ˜¯åœ¨ <code>array = [2, 8, 22]</code> å†™å®Œå æ‰§è¡Œæ•´ä¸ªä»£ç å—æ—¶æ‰§è¡Œ.</p>
</li>
<li>
<p>æ‰€ä»¥åœ¨è¿è¡Œå‰, <code>array</code> å·²ç»è¢«é‡æ–°èµ‹å€¼ä¸º <code>[2, 8, 22]</code>, å› æ­¤å¯¹äºä¹‹å‰çš„ <code>1</code>, <code>8</code> å’Œ <code>15</code>, åªæœ‰ <code>count(8)</code> çš„ç»“æœæ˜¯å¤§äº <code>0</code> çš„, æ‰€ä»¥ç”Ÿæˆå™¨åªä¼šç”Ÿæˆ <code>8</code>.</p>
</li>
<li>
<p>ç¬¬äºŒéƒ¨åˆ†ä¸­ <code>g1</code> å’Œ <code>g2</code> çš„è¾“å‡ºå·®å¼‚åˆ™æ˜¯ç”±äºå˜é‡ <code>array_1</code> å’Œ <code>array_2</code> è¢«é‡æ–°èµ‹å€¼çš„æ–¹å¼å¯¼è‡´çš„.</p>
</li>
<li>
<p>åœ¨ç¬¬ä¸€ç§æƒ…å†µä¸‹, <code>array_1</code> è¢«ç»‘å®šåˆ°æ–°å¯¹è±¡ <code>[1,2,3,4,5]</code>, å› ä¸º <code>in</code> å­å¥æ˜¯åœ¨å£°æ˜æ—¶è¢«æ‰§è¡Œçš„ï¼Œ æ‰€ä»¥å®ƒä»ç„¶å¼•ç”¨æ—§å¯¹è±¡ <code>[1,2,3,4]</code>(å¹¶æ²¡æœ‰è¢«é”€æ¯).</p>
</li>
<li>
<p>åœ¨ç¬¬äºŒç§æƒ…å†µä¸‹, å¯¹ <code>array_2</code> çš„åˆ‡ç‰‡èµ‹å€¼å°†ç›¸åŒçš„æ—§å¯¹è±¡ <code>[1,2,3,4]</code> åŸåœ°æ›´æ–°ä¸º <code>[1,2,3,4,5]</code>. å› æ­¤ <code>g2</code> å’Œ <code>array_2</code> ä»ç„¶å¼•ç”¨åŒä¸€ä¸ªå¯¹è±¡(è¿™ä¸ªå¯¹è±¡ç°åœ¨å·²ç»æ›´æ–°ä¸º <code>[1,2,3,4,5]</code>).</p>
<hr>
</li>
</ul>
<h3 id="is-is-not-what-it-is-å‡ºäººæ„æ–™çš„is">&gt;<code>is</code> is not what it is!/å‡ºäººæ„æ–™çš„<code>is</code>!</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">ä¸‹é¢æ˜¯ä¸€ä¸ªåœ¨äº’è”ç½‘ä¸Šéå¸¸æœ‰åçš„ä¾‹å­.</span><br><span class="line"></span><br><span class="line">```python</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="number">256</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = <span class="number">256</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a <span class="keyword">is</span> b</span><br><span class="line"><span class="keyword">True</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="number">257</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = <span class="number">257</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a <span class="keyword">is</span> b</span><br><span class="line"><span class="keyword">False</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="number">257</span>; b = <span class="number">257</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a <span class="keyword">is</span> b</span><br><span class="line"><span class="keyword">True</span></span><br><span class="line">```</span><br><span class="line"></span><br><span class="line"><span class="comment">#### ğŸ’¡ è¯´æ˜:</span></span><br><span class="line"></span><br><span class="line">**<span class="keyword">is</span> å’Œ == çš„åŒºåˆ«**</span><br><span class="line"></span><br><span class="line">- `<span class="keyword">is</span>` è¿ç®—ç¬¦æ£€æŸ¥ä¸¤ä¸ªè¿ç®—å¯¹è±¡æ˜¯å¦å¼•ç”¨è‡ªåŒä¸€å¯¹è±¡ (å³, å®ƒæ£€æŸ¥ä¸¤ä¸ªé¢„ç®—å¯¹è±¡æ˜¯å¦ç›¸åŒ).</span><br><span class="line"></span><br><span class="line">- `==` è¿ç®—ç¬¦æ¯”è¾ƒä¸¤ä¸ªè¿ç®—å¯¹è±¡çš„å€¼æ˜¯å¦ç›¸ç­‰.</span><br><span class="line"></span><br><span class="line">- å› æ­¤</span><br></pre></td></tr></table></figure>
<p>â€‹</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">```python</span><br><span class="line"><span class="keyword">is</span></span><br><span class="line">```</span><br></pre></td></tr></table></figure>
<p>â€‹</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ä»£è¡¨å¼•ç”¨ç›¸åŒ,</span><br></pre></td></tr></table></figure>
<p>â€‹</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">```python</span><br><span class="line">==</span><br><span class="line">```</span><br></pre></td></tr></table></figure>
<p>â€‹</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">  ä»£è¡¨å€¼ç›¸ç­‰. ä¸‹é¢çš„ä¾‹å­å¯ä»¥å¾ˆå¥½çš„è¯´æ˜è¿™ç‚¹,</span><br><span class="line"></span><br><span class="line">  ```python</span><br><span class="line">  &gt;&gt;&gt; [] == []</span><br><span class="line">  <span class="keyword">True</span></span><br><span class="line">  &gt;&gt;&gt; [] <span class="keyword">is</span> [] <span class="comment"># è¿™ä¸¤ä¸ªç©ºåˆ—è¡¨ä½äºä¸åŒçš„å†…å­˜åœ°å€.</span></span><br><span class="line">  <span class="keyword">False</span></span><br><span class="line">  ```</span><br><span class="line"></span><br><span class="line">**<span class="number">256</span> æ˜¯ä¸€ä¸ªå·²ç»å­˜åœ¨çš„å¯¹è±¡, è€Œ <span class="number">257</span> ä¸æ˜¯**</span><br><span class="line"></span><br><span class="line">å½“ä½ å¯åŠ¨Python çš„æ—¶å€™, `<span class="number">-5</span>` åˆ° `<span class="number">256</span>` çš„æ•°å€¼å°±å·²ç»è¢«åˆ†é…å¥½äº†. è¿™äº›æ•°å­—å› ä¸ºç»å¸¸ä½¿ç”¨æ‰€ä»¥é€‚åˆè¢«æå‰å‡†å¤‡å¥½.</span><br><span class="line"></span><br><span class="line">å¼•ç”¨è‡ª &lt;https://docs.python.org/<span class="number">3</span>/c-api/long.html&gt;</span><br><span class="line"></span><br><span class="line">&gt; å½“å‰çš„å®ç°ä¸º<span class="number">-5</span>åˆ°<span class="number">256</span>ä¹‹é—´çš„æ‰€æœ‰æ•´æ•°ä¿ç•™ä¸€ä¸ªæ•´æ•°å¯¹è±¡æ•°ç»„, å½“ä½ åˆ›å»ºäº†ä¸€ä¸ªè¯¥èŒƒå›´å†…çš„æ•´æ•°æ—¶, ä½ åªéœ€è¦è¿”å›ç°æœ‰å¯¹è±¡çš„å¼•ç”¨. æ‰€ä»¥æ”¹å˜<span class="number">1</span>çš„å€¼æ˜¯æœ‰å¯èƒ½çš„. æˆ‘æ€€ç–‘è¿™ç§è¡Œä¸ºåœ¨Pythonä¸­æ˜¯æœªå®šä¹‰è¡Œä¸º. :-)</span><br><span class="line"></span><br><span class="line">```python</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>id(<span class="number">256</span>)</span><br><span class="line"><span class="number">10922528</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="number">256</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = <span class="number">256</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>id(a)</span><br><span class="line"><span class="number">10922528</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>id(b)</span><br><span class="line"><span class="number">10922528</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>id(<span class="number">257</span>)</span><br><span class="line"><span class="number">140084850247312</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x = <span class="number">257</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>y = <span class="number">257</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>id(x)</span><br><span class="line"><span class="number">140084850247440</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>id(y)</span><br><span class="line"><span class="number">140084850247344</span></span><br><span class="line">```</span><br><span class="line"></span><br><span class="line">è¿™é‡Œè§£é‡Šå™¨å¹¶æ²¡æœ‰æ™ºèƒ½åˆ°èƒ½åœ¨æ‰§è¡Œ `y = <span class="number">257</span>` æ—¶æ„è¯†åˆ°æˆ‘ä»¬å·²ç»åˆ›å»ºäº†ä¸€ä¸ªæ•´æ•° `<span class="number">257</span>`, æ‰€ä»¥å®ƒåœ¨å†…å­˜ä¸­åˆæ–°å»ºäº†å¦ä¸€ä¸ªå¯¹è±¡.</span><br><span class="line"></span><br><span class="line">**å½“ a å’Œ b åœ¨åŒä¸€è¡Œä¸­ä½¿ç”¨ç›¸åŒçš„å€¼åˆå§‹åŒ–æ—¶ï¼Œä¼šæŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡.**</span><br><span class="line"></span><br><span class="line">```python</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a, b = <span class="number">257</span>, <span class="number">257</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>id(a)</span><br><span class="line"><span class="number">140640774013296</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>id(b)</span><br><span class="line"><span class="number">140640774013296</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="number">257</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = <span class="number">257</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>id(a)</span><br><span class="line"><span class="number">140640774013392</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>id(b)</span><br><span class="line"><span class="number">140640774013488</span></span><br><span class="line">```</span><br><span class="line"></span><br><span class="line">- å½“ a å’Œ b åœ¨åŒä¸€è¡Œä¸­è¢«è®¾ç½®ä¸º `<span class="number">257</span>` æ—¶, Python è§£é‡Šå™¨ä¼šåˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡, ç„¶ååŒæ—¶å¼•ç”¨ç¬¬äºŒä¸ªå˜é‡. å¦‚æœä½ åœ¨ä¸åŒçš„è¡Œä¸Šè¿›è¡Œ, å®ƒå°±ä¸ä¼š <span class="string">"çŸ¥é“"</span> å·²ç»å­˜åœ¨ä¸€ä¸ª `<span class="number">257</span>` å¯¹è±¡äº†.</span><br><span class="line">- è¿™æ˜¯ä¸€ç§ç‰¹åˆ«ä¸ºäº¤äº’å¼ç¯å¢ƒåšçš„ç¼–è¯‘å™¨ä¼˜åŒ–. å½“ä½ åœ¨å®æ—¶è§£é‡Šå™¨ä¸­è¾“å…¥ä¸¤è¡Œçš„æ—¶å€™, ä»–ä»¬ä¼šå•ç‹¬ç¼–è¯‘, å› æ­¤ä¹Ÿä¼šå•ç‹¬è¿›è¡Œä¼˜åŒ–. å¦‚æœä½ åœ¨ `.py` æ–‡ä»¶ä¸­å°è¯•è¿™ä¸ªä¾‹å­, åˆ™ä¸ä¼šçœ‹åˆ°ç›¸åŒçš„è¡Œä¸º, å› ä¸ºæ–‡ä»¶æ˜¯ä¸€æ¬¡æ€§ç¼–è¯‘çš„.</span><br></pre></td></tr></table></figure>
<h3 id="a-tic-tac-toe-where-x-wins-in-the-first-attempt-ä¸€è¹´å³è‡³">&gt; A tic-tac-toe where X wins in the first attempt!/ä¸€è¹´å³è‡³!</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æˆ‘ä»¬å…ˆåˆå§‹åŒ–ä¸€ä¸ªå˜é‡row</span></span><br><span class="line">row = [<span class="string">""</span>]*<span class="number">3</span> <span class="comment">#row i['', '', '']</span></span><br><span class="line"><span class="comment"># å¹¶åˆ›å»ºä¸€ä¸ªå˜é‡board</span></span><br><span class="line">board = [row]*<span class="number">3</span></span><br></pre></td></tr></table></figure>
<p><strong>Output:</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>board</span><br><span class="line">[[<span class="string">''</span>, <span class="string">''</span>, <span class="string">''</span>], [<span class="string">''</span>, <span class="string">''</span>, <span class="string">''</span>], [<span class="string">''</span>, <span class="string">''</span>, <span class="string">''</span>]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>board[<span class="number">0</span>]</span><br><span class="line">[<span class="string">''</span>, <span class="string">''</span>, <span class="string">''</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>board[<span class="number">0</span>][<span class="number">0</span>]</span><br><span class="line"><span class="string">''</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>board[<span class="number">0</span>][<span class="number">0</span>] = <span class="string">"X"</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>board</span><br><span class="line">[[<span class="string">'X'</span>, <span class="string">''</span>, <span class="string">''</span>], [<span class="string">'X'</span>, <span class="string">''</span>, <span class="string">''</span>], [<span class="string">'X'</span>, <span class="string">''</span>, <span class="string">''</span>]]</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬æœ‰æ²¡æœ‰èµ‹å€¼è¿‡3ä¸ª â€œXâ€ å‘¢ï¼Ÿ</p>
<h4 id="ğŸ’¡-è¯´æ˜-v5">ğŸ’¡ è¯´æ˜:</h4>
<p>å½“æˆ‘ä»¬åˆå§‹åŒ– <code>row</code> å˜é‡æ—¶, ä¸‹é¢è¿™å¼ å›¾å±•ç¤ºäº†å†…å­˜ä¸­çš„æƒ…å†µã€‚</p>
<p><a href="https://github.com/leisurelicht/wtfpython-cn/blob/master/images/tic-tac-toe/after_row_initialized.png" target="_blank" rel="noopener"><img src="https://github.com/leisurelicht/wtfpython-cn/raw/master/images/tic-tac-toe/after_row_initialized.png" alt="image"></a></p>
<p>è€Œå½“é€šè¿‡å¯¹ <code>row</code> åšä¹˜æ³•æ¥åˆå§‹åŒ– <code>board</code> æ—¶, å†…å­˜ä¸­çš„æƒ…å†µåˆ™å¦‚ä¸‹å›¾æ‰€ç¤º (æ¯ä¸ªå…ƒç´  <code>board[0]</code>, <code>board[1]</code> å’Œ <code>board[2]</code> éƒ½å’Œ <code>row</code> ä¸€æ ·å¼•ç”¨äº†åŒä¸€åˆ—è¡¨.)</p>
<p><a href="https://github.com/leisurelicht/wtfpython-cn/blob/master/images/tic-tac-toe/after_board_initialized.png" target="_blank" rel="noopener"><img src="https://github.com/leisurelicht/wtfpython-cn/raw/master/images/tic-tac-toe/after_board_initialized.png" alt="image"></a></p>
<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸ä½¿ç”¨å˜é‡ <code>row</code> ç”Ÿæˆ <code>board</code> æ¥é¿å…è¿™ç§æƒ…å†µ. (<a href="https://github.com/satwikkansal/wtfpython/issues/68" target="_blank" rel="noopener">è¿™ä¸ª</a>issueæå‡ºäº†è¿™ä¸ªéœ€æ±‚.)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>board = [[<span class="string">''</span>]*<span class="number">3</span> <span class="keyword">for</span> _ <span class="keyword">in</span> range(<span class="number">3</span>)]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>board[<span class="number">0</span>][<span class="number">0</span>] = <span class="string">"X"</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>board</span><br><span class="line">[[<span class="string">'X'</span>, <span class="string">''</span>, <span class="string">''</span>], [<span class="string">''</span>, <span class="string">''</span>, <span class="string">''</span>], [<span class="string">''</span>, <span class="string">''</span>, <span class="string">''</span>]]</span><br></pre></td></tr></table></figure>
<h3 id="the-sticky-output-function-éº»çƒ¦çš„è¾“å‡º">&gt; The sticky output function/éº»çƒ¦çš„è¾“å‡º</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">funcs = []</span><br><span class="line">results = []</span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">7</span>):</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">some_func</span><span class="params">()</span>:</span></span><br><span class="line">        <span class="keyword">return</span> x</span><br><span class="line">    funcs.append(some_func)</span><br><span class="line">    results.append(some_func()) <span class="comment"># æ³¨æ„è¿™é‡Œå‡½æ•°è¢«æ‰§è¡Œäº†</span></span><br><span class="line"></span><br><span class="line">funcs_results = [func() <span class="keyword">for</span> func <span class="keyword">in</span> funcs]</span><br></pre></td></tr></table></figure>
<p><strong>Output:</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>results</span><br><span class="line">[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>funcs_results</span><br><span class="line">[<span class="number">6</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">6</span>]</span><br></pre></td></tr></table></figure>
<p>å³ä½¿æ¯æ¬¡åœ¨è¿­ä»£ä¸­å°† <code>some_func</code> åŠ å…¥ <code>funcs</code> å‰çš„ <code>x</code> å€¼éƒ½ä¸ç›¸åŒ, æ‰€æœ‰çš„å‡½æ•°è¿˜æ˜¯éƒ½è¿”å›6.</p>
<p>// å†æ¢ä¸ªä¾‹å­</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>powers_of_x = [<span class="keyword">lambda</span> x: x**i <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">10</span>)]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[f(<span class="number">2</span>) <span class="keyword">for</span> f <span class="keyword">in</span> powers_of_x]</span><br><span class="line">[<span class="number">512</span>, <span class="number">512</span>, <span class="number">512</span>, <span class="number">512</span>, <span class="number">512</span>, <span class="number">512</span>, <span class="number">512</span>, <span class="number">512</span>, <span class="number">512</span>, <span class="number">512</span>]</span><br></pre></td></tr></table></figure>
<h4 id="ğŸ’¡-è¯´æ˜-v6">ğŸ’¡ è¯´æ˜:</h4>
<ul>
<li>
<p>å½“åœ¨å¾ªç¯å†…éƒ¨å®šä¹‰ä¸€ä¸ªå‡½æ•°æ—¶, å¦‚æœè¯¥å‡½æ•°åœ¨å…¶ä¸»ä½“ä¸­ä½¿ç”¨äº†å¾ªç¯å˜é‡, åˆ™é—­åŒ…å‡½æ•°å°†ä¸å¾ªç¯å˜é‡ç»‘å®š, è€Œä¸æ˜¯å®ƒçš„å€¼. å› æ­¤, æ‰€æœ‰çš„å‡½æ•°éƒ½æ˜¯ä½¿ç”¨æœ€ååˆ†é…ç»™å˜é‡çš„å€¼æ¥è¿›è¡Œè®¡ç®—çš„.</p>
</li>
<li>
<p>Pythonè°ƒç”¨å‡½æ•°åŠ æ‹¬å·å’Œä¸åŠ æ‹¬å·çš„åŒºåˆ«ï¼š</p>
<p>ä¸€ã€ä¸å¸¦æ‹¬å·æ—¶ï¼Œè°ƒç”¨çš„æ˜¯è¿™ä¸ªå‡½æ•°æœ¬èº« ï¼Œæ˜¯æ•´ä¸ªå‡½æ•°ä½“ï¼Œæ˜¯ä¸€ä¸ªå‡½æ•°å¯¹è±¡ï¼Œä¸é¡»ç­‰è¯¥å‡½æ•°æ‰§è¡Œå®Œæˆ</p>
<p>äºŒã€å¸¦æ‹¬å·ï¼ˆå‚æ•°æˆ–è€…æ— å‚ï¼‰ï¼Œè°ƒç”¨çš„æ˜¯å‡½æ•°çš„æ‰§è¡Œç»“æœï¼Œé¡»ç­‰è¯¥å‡½æ•°æ‰§è¡Œå®Œæˆçš„ç»“æœ</p>
</li>
</ul>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span>  <span class="title">bracket</span><span class="params">(data)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> data</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    <span class="comment"># ä¸å¸¦æ‹¬å·è°ƒç”¨çš„ç»“æœï¼š&lt;function bracket at 0x0000000004DD0B38&gt;,aæ˜¯æ•´ä¸ªå‡½æ•°ä½“ï¼Œæ˜¯ä¸€ä¸ªå‡½æ•°å¯¹è±¡ï¼Œä¸é¡»ç­‰è¯¥å‡½æ•°æ‰§è¡Œå®Œæˆ</span></span><br><span class="line">    a = bracket</span><br><span class="line">    <span class="keyword">print</span> (a)</span><br><span class="line">    <span class="comment"># å¸¦æ‹¬å·è°ƒç”¨çš„ç»“æœï¼š6 ,bæ˜¯å‡½æ•°æ‰§è¡Œåè¿”å›çš„å€¼6,é¡»ç­‰è¯¥å‡½æ•°æ‰§è¡Œå®Œæˆçš„ç»“æœ</span></span><br><span class="line">    b = bracket(<span class="number">6</span>)</span><br><span class="line">    <span class="keyword">print</span> (b)</span><br></pre></td></tr></table></figure>
<p><strong>Output:</strong></p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;function bracket at <span class="number">0x0000016B43B4C7B8</span>&gt;</span><br><span class="line"><span class="number">6</span></span><br></pre></td></tr></table></figure>
<ul>
<li>
<p>å¯ä»¥é€šè¿‡å°†å¾ªç¯å˜é‡ä½œä¸ºå‘½åå˜é‡ä¼ é€’ç»™å‡½æ•°æ¥è·å¾—é¢„æœŸçš„ç»“æœ. <strong>ä¸ºä»€ä¹ˆè¿™æ ·å¯è¡Œ?</strong> å› ä¸ºè¿™ä¼šåœ¨å‡½æ•°å†…å†æ¬¡å®šä¹‰ä¸€ä¸ªå±€éƒ¨å˜é‡.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">funcs = []s</span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">7</span>):</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">some_func</span><span class="params">(x=x)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> x</span><br><span class="line">    funcs.append(some_func)</span><br></pre></td></tr></table></figure>
<p><strong>Output:</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>funcs_results = [func() <span class="keyword">for</span> func <span class="keyword">in</span> funcs]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>funcs_results</span><br><span class="line">[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]</span><br></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<h3 id="is-not-is-not-is-not-is-not-ä¸æ˜¯-is-not">&gt; <code>is not ...</code> is not <code>is (not ...)</code>/<code>is not ...</code> ä¸æ˜¯ <code>is (not ...)</code></h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'something'</span> <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">None</span></span><br><span class="line"><span class="keyword">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'something'</span> <span class="keyword">is</span> (<span class="keyword">not</span> <span class="keyword">None</span>)</span><br><span class="line"><span class="keyword">False</span></span><br></pre></td></tr></table></figure>
<h4 id="ğŸ’¡-è¯´æ˜-v7">ğŸ’¡ è¯´æ˜:</h4>
<ul>
<li><code>is not</code> æ˜¯ä¸ªå•ç‹¬çš„äºŒå…ƒè¿ç®—ç¬¦, ä¸åˆ†åˆ«ä½¿ç”¨ <code>is</code> å’Œ <code>not</code> ä¸åŒ.</li>
<li>å¦‚æœæ“ä½œç¬¦ä¸¤ä¾§çš„å˜é‡æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡, åˆ™ <code>is not</code> çš„ç»“æœä¸º <code>False</code>, å¦åˆ™ç»“æœä¸º <code>True</code>.</li>
</ul>
<h3 id="backslashes-at-the-end-of-string-å­—ç¬¦ä¸²æœ«å°¾çš„åæ–œæ ">&gt; Backslashes at the end of string/å­—ç¬¦ä¸²æœ«å°¾çš„åæ–œæ </h3>
<p><strong>Output:</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">"\\ C:\\"</span>)</span><br><span class="line">\ C:\</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">r"\ C:"</span>)</span><br><span class="line">\ C:</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">r"\ C:\")</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    File "</span>&lt;stdin&gt;<span class="string">", line 1</span></span><br><span class="line"><span class="string">      print(r"</span>\ C:\<span class="string">")</span></span><br><span class="line"><span class="string">                     ^</span></span><br><span class="line"><span class="string">SyntaxError: EOL while scanning string literal</span></span><br></pre></td></tr></table></figure>
<h4 id="ğŸ’¡-è¯´æ˜-v8">ğŸ’¡ è¯´æ˜:</h4>
<ul>
<li>
<p>åœ¨ä»¥rå¼€å¤´çš„åŸå§‹å­—ç¬¦ä¸²ä¸­, åæ–œæ å¹¶æ²¡æœ‰ç‰¹æ®Šå«ä¹‰.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(repr(<span class="string">r"wt\"f"</span>))</span><br><span class="line"><span class="string">'wt\\"f'</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>è§£é‡Šå™¨æ‰€åšçš„åªæ˜¯ç®€å•çš„æ”¹å˜äº†åæ–œæ çš„è¡Œä¸º, å› æ­¤ä¼šç›´æ¥æ”¾è¡Œåæ–œæ åŠåä¸€ä¸ªçš„å­—ç¬¦. è¿™å°±æ˜¯åæ–œæ åœ¨åŸå§‹å­—ç¬¦ä¸²æœ«å°¾ä¸èµ·ä½œç”¨çš„åŸå› .</p>
</li>
<li>
<p>å­—ç¬¦ä¸²çš„æœ«å°¾ï¼Œå³ä½¿æ˜¯åŸå§‹ï¼ˆrawï¼‰å­—ç¬¦ä¸²æœ«å°¾ä¹Ÿä¸èƒ½å¸¦å¥‡æ•°ä¸ªåæ–œæ ï¼Œå› ä¸ºè¿™ä¼šå¼•èµ·åç»­å¼•å·çš„è½¬ä¹‰ï¼šæ¯”å¦‚râ€™C:\Windowsâ€™è¿™ä¸ªå­—ç¬¦ä¸²å¸¸é‡ï¼Œåä¸€ä¸ªåæ–œæ ä¼šå‘Šè¯‰è§£æå™¨åé¢çš„å•å¼•å·ä¸æ˜¯å­—ç¬¦ä¸²çš„ç»“å°¾ï¼Œå­—ç¬¦ä¸²ç”±ä¸¤ä¸ªå¼•å·åŒ…å›´ï¼Œå°‘äº†ä¸€ä¸ªå¼•å·ç»“æŸå­—ç¬¦ä¸²ï¼Œæ‰€ä»¥å‡ºç°&quot;SyntaxError: EOL while scanning single-quoted string &quot;è¿™ä¸ªé”™è¯¯</p>
</li>
<li>
<p>râ€™C:\Windowsâ€™newâ€™ä¸ä¼šå‡ºé”™ï¼Œå¾ˆå¤šäººç†è§£çš„åŸå§‹å­—ç¬¦ä¸²ä¼šä¿ç•™å­—ç¬¦æœ¬æ¥çš„æ„ä¹‰ï¼Œæ‰€ä»¥ä¼šè®¤ä¸ºå­—ç¬¦ä¸²ä¸­râ€™C:\Windowsâ€™å·²ç»æ˜¯ä¸€ä¸ªåˆæ³•çš„å­—ç¬¦ä¸²äº†ï¼Œåé¢è¿˜è·Ÿç€newâ€™ä½¿å¾—å­—ç¬¦ä¸²ä¸åˆæ³•ï¼Œå…¶å®è¿™ä¸ªå­—ç¬¦ä¸²ä¸­râ€™C:\Windowsâ€™ä¸åˆæ³•ï¼Œåº”ä¸ºåé¢çš„åæ–œæ å‘Šè¯‰è§£æå™¨&quot;æˆ‘åé¢çš„å¼•å·çš„æ„ä¹‰å·²ç»è¢«æˆ‘è½¬ä¹‰äº†ï¼Œåœ¨è¿™é‡Œä¸æ˜¯å­—ç¬¦ä¸²çš„ç»“å°¾ï¼Œä½ å¯ä»¥ç»§ç»­è¿›è¡Œè§£æ&quot;ã€‚</p>
</li>
</ul>
<h3 id="not-knot-åˆ«çº ç»“">&gt; not knot!/åˆ«çº ç»“!</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">x = <span class="keyword">True</span></span><br><span class="line">y = <span class="keyword">False</span></span><br></pre></td></tr></table></figure>
<p><strong>Output:</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">not</span> x == y</span><br><span class="line"><span class="keyword">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x == <span class="keyword">not</span> y</span><br><span class="line">  File <span class="string">"&lt;input&gt;"</span>, line <span class="number">1</span></span><br><span class="line">    x == <span class="keyword">not</span> y</span><br><span class="line">           ^</span><br><span class="line">SyntaxError: invalid syntax</span><br></pre></td></tr></table></figure>
<h4 id="ğŸ’¡-è¯´æ˜-v9">ğŸ’¡ è¯´æ˜:</h4>
<ul>
<li>è¿ç®—ç¬¦çš„ä¼˜å…ˆçº§ä¼šå½±å“è¡¨è¾¾å¼çš„æ±‚å€¼é¡ºåº, è€Œåœ¨ Python ä¸­ <code>==</code> è¿ç®—ç¬¦çš„ä¼˜å…ˆçº§è¦é«˜äº <code>not</code> è¿ç®—ç¬¦.</li>
<li>æ‰€ä»¥ <code>not x == y</code> ç›¸å½“äº <code>not (x == y)</code>, åŒæ—¶ç­‰ä»·äº <code>not (True == False)</code>, æœ€åçš„è¿ç®—ç»“æœå°±æ˜¯ <code>True</code>.</li>
<li>ä¹‹æ‰€ä»¥ <code>x == not y</code> ä¼šæŠ›ä¸€ä¸ª <code>SyntaxError</code> å¼‚å¸¸, æ˜¯å› ä¸ºå®ƒä¼šè¢«è®¤ä¸ºç­‰ä»·äº <code>(x == not) y</code>, è€Œä¸æ˜¯ä½ ä¸€å¼€å§‹æœŸæœ›çš„ <code>x == (not y)</code>.</li>
<li>è§£é‡Šå™¨æœŸæœ› <code>not</code> æ ‡è®°æ˜¯ <code>not in</code> æ“ä½œç¬¦çš„ä¸€éƒ¨åˆ† (å› ä¸º <code>==</code> å’Œ <code>not in</code> æ“ä½œç¬¦å…·æœ‰ç›¸åŒçš„ä¼˜å…ˆçº§), ä½†æ˜¯å®ƒåœ¨ <code>not</code> æ ‡è®°åé¢æ‰¾ä¸åˆ° <code>in</code> æ ‡è®°, æ‰€ä»¥ä¼šæŠ›å‡º <code>SyntaxError</code> å¼‚å¸¸.</li>
</ul>
<h3 id="half-triple-quoted-strings-ä¸‰ä¸ªå¼•å·">&gt; Half triple-quoted strings/ä¸‰ä¸ªå¼•å·</h3>
<p><strong>Output:</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">'wtfpython'</span><span class="string">''</span>)</span><br><span class="line">wtfpython</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">"wtfpython"</span><span class="string">""</span>)</span><br><span class="line">wtfpython</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># ä¸‹é¢çš„è¯­å¥ä¼šæŠ›å‡º `SyntaxError` å¼‚å¸¸</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># print('''wtfpython')</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># print("""wtfpython")</span></span><br></pre></td></tr></table></figure>
<h4 id="ğŸ’¡-è¯´æ˜-v10">ğŸ’¡ è¯´æ˜:</h4>
<ul>
<li>
<p>Python æä¾›éšå¼çš„</p>
<p>å­—ç¬¦ä¸²é“¾æ¥</p>
<p>, ä¾‹å¦‚,</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">"wtf"</span> <span class="string">"python"</span>)</span><br><span class="line">wtfpython</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">"wtf"</span> <span class="string">""</span>) <span class="comment"># or "wtf"""</span></span><br><span class="line">wtf</span><br></pre></td></tr></table></figure>
</li>
<li>
<p><code>'''</code> å’Œ <code>&quot;&quot;&quot;</code> åœ¨ Pythonä¸­ä¹Ÿæ˜¯å­—ç¬¦ä¸²å®šç•Œç¬¦, Python è§£é‡Šå™¨åœ¨å…ˆé‡åˆ°ä¸‰ä¸ªå¼•å·çš„çš„æ—¶å€™ä¼šå°è¯•å†å¯»æ‰¾ä¸‰ä¸ªç»ˆæ­¢å¼•å·ä½œä¸ºå®šç•Œç¬¦, å¦‚æœä¸å­˜åœ¨åˆ™ä¼šå¯¼è‡´ <code>SyntaxError</code> å¼‚å¸¸.</p>
<h3 id="midnight-time-doesn-t-exist-ä¸å­˜åœ¨çš„åˆå¤œ">&gt; Midnight time doesnâ€™t exist?/ä¸å­˜åœ¨çš„åˆå¤œ?</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line">midnight = datetime(<span class="number">2018</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">midnight_time = midnight.time()</span><br><span class="line"></span><br><span class="line">noon = datetime(<span class="number">2018</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">12</span>, <span class="number">0</span>)</span><br><span class="line">noon_time = noon.time()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> midnight_time:</span><br><span class="line">    print(<span class="string">"Time at midnight is"</span>, midnight_time)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> noon_time:</span><br><span class="line">    print(<span class="string">"Time at noon is"</span>, noon_time)</span><br></pre></td></tr></table></figure>
<p><strong>Output:</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(<span class="string">'Time at noon is'</span>, datetime.time(<span class="number">12</span>, <span class="number">0</span>))</span><br></pre></td></tr></table></figure>
<p>midnight_time å¹¶æ²¡æœ‰è¢«è¾“å‡º.</p>
<h4 id="ğŸ’¡-è¯´æ˜-v11">ğŸ’¡ è¯´æ˜:</h4>
<p>åœ¨Python 3.5ä¹‹å‰, å¦‚æœ <code>datetime.time</code> å¯¹è±¡å­˜å‚¨çš„UTCçš„åˆå¤œæ—¶é—´(è¯‘: å°±æ˜¯ <code>00:00</code>), é‚£ä¹ˆå®ƒçš„å¸ƒå°”å€¼ä¼šè¢«è®¤ä¸ºæ˜¯ <code>False</code>. å½“ä½¿ç”¨ <code>if obj:</code> è¯­å¥æ¥æ£€æŸ¥ <code>obj</code> æ˜¯å¦ä¸º <code>null</code> æˆ–è€…æŸäº›â€œç©ºâ€å€¼çš„æ—¶å€™, å¾ˆå®¹æ˜“å‡ºé”™.</p>
</li>
</ul>
<h3 id="what-s-wrong-with-booleans-å¸ƒå°”ä½ å’‹äº†">&gt; Whatâ€™s wrong with booleans?/å¸ƒå°”ä½ å’‹äº†?</h3>
<ol>
<li></li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¸€ä¸ªç®€å•çš„ä¾‹å­, ç»Ÿè®¡ä¸‹é¢å¯è¿­ä»£å¯¹è±¡ä¸­çš„å¸ƒå°”å‹å€¼çš„ä¸ªæ•°å’Œæ•´å‹å€¼çš„ä¸ªæ•°</span></span><br><span class="line">mixed_list = [<span class="keyword">False</span>, <span class="number">1.0</span>, <span class="string">"some_string"</span>, <span class="number">3</span>, <span class="keyword">True</span>, [], <span class="keyword">False</span>]</span><br><span class="line">integers_found_so_far = <span class="number">0</span></span><br><span class="line">booleans_found_so_far = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> mixed_list:</span><br><span class="line">    <span class="keyword">if</span> isinstance(item, int):</span><br><span class="line">        integers_found_so_far += <span class="number">1</span></span><br><span class="line">    <span class="keyword">elif</span> isinstance(item, bool):</span><br><span class="line">        booleans_found_so_far += <span class="number">1</span></span><br></pre></td></tr></table></figure>
<p><strong>Output:</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>integers_found_so_far</span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>booleans_found_so_far</span><br><span class="line"><span class="number">0</span></span><br></pre></td></tr></table></figure>
<ol start="2">
<li></li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">another_dict = &#123;&#125;</span><br><span class="line">another_dict[<span class="keyword">True</span>] = <span class="string">"JavaScript"</span></span><br><span class="line">another_dict[<span class="number">1</span>] = <span class="string">"Ruby"</span></span><br><span class="line">another_dict[<span class="number">1.0</span>] = <span class="string">"Python"</span></span><br></pre></td></tr></table></figure>
<p><strong>Output:</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>another_dict[<span class="keyword">True</span>]</span><br><span class="line"><span class="string">"Python"</span></span><br></pre></td></tr></table></figure>
<ol start="3">
<li></li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>some_bool = <span class="keyword">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">"wtf"</span>*some_bool</span><br><span class="line"><span class="string">'wtf'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>some_bool = <span class="keyword">False</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">"wtf"</span>*some_bool</span><br><span class="line"><span class="string">''</span></span><br></pre></td></tr></table></figure>
<h4 id="ğŸ’¡-è¯´æ˜-v12">ğŸ’¡ è¯´æ˜:</h4>
<ul>
<li>
<p>å¸ƒå°”å€¼æ˜¯ <code>int</code> çš„å­ç±»</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>isinstance(<span class="keyword">True</span>, int)</span><br><span class="line"><span class="keyword">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>isinstance(<span class="keyword">False</span>, int)</span><br><span class="line"><span class="keyword">True</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>æ‰€ä»¥ <code>True</code> çš„æ•´æ•°å€¼æ˜¯ <code>1</code>, è€Œ <code>False</code> çš„æ•´æ•°å€¼æ˜¯ <code>0</code>.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">True</span> == <span class="number">1</span> == <span class="number">1.0</span> <span class="keyword">and</span> <span class="keyword">False</span> == <span class="number">0</span> == <span class="number">0.0</span></span><br><span class="line"><span class="keyword">True</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>å…³äºå…¶èƒŒåçš„åŸç†, è¯·çœ‹è¿™ä¸ª StackOverflow çš„<a href="https://stackoverflow.com/a/8169049/4354153" target="_blank" rel="noopener">å›ç­”</a>.</p>
</li>
</ul>
<h3 id="class-attributes-and-instance-attributes-ç±»å±æ€§å’Œå®ä¾‹å±æ€§">&gt; Class attributes and instance attributes/ç±»å±æ€§å’Œå®ä¾‹å±æ€§</h3>
<ol>
<li></li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span>:</span></span><br><span class="line">    x = <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span><span class="params">(A)</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span><span class="params">(A)</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>
<p><strong>Output:</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>A.x, B.x, C.x</span><br><span class="line">(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>B.x = <span class="number">2</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>A.x, B.x, C.x</span><br><span class="line">(<span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>A.x = <span class="number">3</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>A.x, B.x, C.x</span><br><span class="line">(<span class="number">3</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = A()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.x, A.x</span><br><span class="line">(<span class="number">3</span>, <span class="number">3</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.x += <span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.x, A.x</span><br><span class="line">(<span class="number">4</span>, <span class="number">3</span>)</span><br></pre></td></tr></table></figure>
<ol start="2">
<li></li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SomeClass</span>:</span></span><br><span class="line">    some_var = <span class="number">15</span></span><br><span class="line">    some_list = [<span class="number">5</span>]</span><br><span class="line">    another_list = [<span class="number">5</span>]</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, x)</span>:</span></span><br><span class="line">        self.some_var = x + <span class="number">1</span></span><br><span class="line">        self.some_list = self.some_list + [x]</span><br><span class="line">        self.another_list += [x]</span><br></pre></td></tr></table></figure>
<p><strong>Output:</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>some_obj = SomeClass(<span class="number">420</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>some_obj.some_list</span><br><span class="line">[<span class="number">5</span>, <span class="number">420</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>some_obj.another_list</span><br><span class="line">[<span class="number">5</span>, <span class="number">420</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>another_obj = SomeClass(<span class="number">111</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>another_obj.some_list</span><br><span class="line">[<span class="number">5</span>, <span class="number">111</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>another_obj.another_list</span><br><span class="line">[<span class="number">5</span>, <span class="number">420</span>, <span class="number">111</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>another_obj.another_list <span class="keyword">is</span> SomeClass.another_list</span><br><span class="line"><span class="keyword">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>another_obj.another_list <span class="keyword">is</span> some_obj.another_list</span><br><span class="line"><span class="keyword">True</span></span><br></pre></td></tr></table></figure>
<h4 id="ğŸ’¡-è¯´æ˜-v13">ğŸ’¡ è¯´æ˜:</h4>
<ul>
<li>ç±»å˜é‡å’Œå®ä¾‹å˜é‡åœ¨å†…éƒ¨æ˜¯é€šè¿‡ç±»å¯¹è±¡çš„å­—å…¸æ¥å¤„ç†(è¯‘: å°±æ˜¯ <code>__dict__</code> å±æ€§). å¦‚æœåœ¨å½“å‰ç±»çš„å­—å…¸ä¸­æ‰¾ä¸åˆ°çš„è¯å°±å»å®ƒçš„çˆ¶ç±»ä¸­å¯»æ‰¾.</li>
<li><code>+=</code> è¿ç®—ç¬¦ä¼šåœ¨åŸåœ°ä¿®æ”¹å¯å˜å¯¹è±¡, è€Œä¸æ˜¯åˆ›å»ºæ–°å¯¹è±¡.(å³ä¼šæŒ‡å‘åŒä¸€å—åœ°å€) å› æ­¤, ä¿®æ”¹ä¸€ä¸ªå®ä¾‹çš„å±æ€§ä¼šå½±å“å…¶ä»–å®ä¾‹å’Œç±»å±æ€§.</li>
</ul>
<h3 id="yielding-none-ç”Ÿæˆ-none">&gt; yielding None/ç”Ÿæˆ None</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">some_iterable = (<span class="string">'a'</span>, <span class="string">'b'</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">some_func</span><span class="params">(val)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">"something"</span></span><br></pre></td></tr></table></figure>
<p><strong>Output:</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>[x <span class="keyword">for</span> x <span class="keyword">in</span> some_iterable]</span><br><span class="line">[<span class="string">'a'</span>, <span class="string">'b'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[(<span class="keyword">yield</span> x) <span class="keyword">for</span> x <span class="keyword">in</span> some_iterable]</span><br><span class="line">&lt;generator object &lt;listcomp&gt; at <span class="number">0x7f70b0a4ad58</span>&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>list([(<span class="keyword">yield</span> x) <span class="keyword">for</span> x <span class="keyword">in</span> some_iterable])</span><br><span class="line">[<span class="string">'a'</span>, <span class="string">'b'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>list((<span class="keyword">yield</span> x) <span class="keyword">for</span> x <span class="keyword">in</span> some_iterable)</span><br><span class="line">[<span class="string">'a'</span>, <span class="keyword">None</span>, <span class="string">'b'</span>, <span class="keyword">None</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>list(some_func((<span class="keyword">yield</span> x)) <span class="keyword">for</span> x <span class="keyword">in</span> some_iterable)</span><br><span class="line">[<span class="string">'a'</span>, <span class="string">'something'</span>, <span class="string">'b'</span>, <span class="string">'something'</span>]</span><br></pre></td></tr></table></figure>
<h4 id="ğŸ’¡-è¯´æ˜-v14">ğŸ’¡ è¯´æ˜:</h4>
<ul>
<li>
<p>é¦–å…ˆæ¥çœ‹çœ‹åœ¨åˆ—è¡¨æ¨å¯¼å¼ä¸­ä½¿ç”¨ yield ä¼šå‘ç”Ÿä»€ä¹ˆï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[(<span class="keyword">yield</span> x) <span class="keyword">for</span> x <span class="keyword">in</span> [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]] <span class="comment"># åœ¨åˆ—è¡¨æ¨å¯¼å¼ä¸­ä½¿ç”¨ yield&gt;&gt;&gt; &lt;generator object &lt;listcomp&gt; at 0x00C21510&gt;</span></span><br></pre></td></tr></table></figure>
<p>ç›¸å½“å¥‡æ€ªï¼Œè¿”å›ä¸€ä¸ª <strong><listcomp></listcomp></strong> ç±»å‹çš„ç”Ÿæˆå™¨è€Œä¸æ˜¯ä¸€ä¸ªåŒ…å«ç”Ÿæˆå™¨çš„åˆ—è¡¨</p>
<p>æ—¢ç„¶æ˜¯ç”Ÿæˆå™¨ï¼Œé‚£æˆ‘ä»¬å°±ç”¨ <code>list()</code> å±•å¼€çœ‹ä¸€ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">list([(<span class="keyword">yield</span> x) <span class="keyword">for</span> x <span class="keyword">in</span> [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]])&gt;&gt;&gt; [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br></pre></td></tr></table></figure>
<p>è™½ç„¶æ‰“å°å‡ºäº†é¢„æœŸçš„ç»“æœï¼Œä½†è¿˜æ˜¯æ„Ÿè§‰å¾ˆå¥‡æ€ªï¼š</p>
<p>åˆ—è¡¨æ¨å¯¼å¼æœ¬èº«å¹¶ä¸éœ€è¦ç”¨ <code>list()</code> å±•å¼€çš„ï¼Œè¿™é‡Œå´éœ€è¦åŠ ä¸Šæ‰è¡Œ</p>
<p>é‚£æˆ‘ä»¬æ¥çœ‹çœ‹å¦‚æœæ˜¯ç”Ÿæˆå™¨è¡¨è¾¾å¼ä¼šå¦‚ä½•ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">((<span class="keyword">yield</span> x) <span class="keyword">for</span> x <span class="keyword">in</span> [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]) <span class="comment"># åœ¨ç”Ÿæˆå™¨è¡¨è¾¾å¼ä¸­ä½¿ç”¨ yield&gt;&gt;&gt; &lt;generator object &lt;genexpr&gt; at 0x00C21C30&gt;</span></span><br></pre></td></tr></table></figure>
<p>å—¯ï¼Œçš„ç¡®æ˜¯è¿”å›ä¸€ä¸ª <strong><genexpr></genexpr></strong> ç±»å‹çš„ç”Ÿæˆå™¨ï¼Œè¿™å¾ˆæ­£å¸¸ï¼Œé‚£æˆ‘ä»¬ç”¨ <code>list()</code> å±•å¼€çœ‹ä¸€ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">list((<span class="keyword">yield</span> x) <span class="keyword">for</span> x <span class="keyword">in</span> [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>])&gt;&gt;&gt; [<span class="number">1</span>, <span class="keyword">None</span>, <span class="number">2</span>, <span class="keyword">None</span>, <span class="number">3</span>, <span class="keyword">None</span>]</span><br></pre></td></tr></table></figure>
<p>ä¸å« yeild çš„ç”Ÿæˆå™¨è¡¨è¾¾å¼ (x for x in [1,2,3]) ç›¸å½“äºå‡½æ•°ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">genexpr</span><span class="params">(some_iterable)</span>:</span>    </span><br><span class="line">	<span class="keyword">for</span> x <span class="keyword">in</span> some_iterable:        </span><br><span class="line">		<span class="keyword">yield</span> x <span class="comment"># å¤–ç•Œä¼ è¿›æ¥çš„å€¼ä¸ç”¨ä¿å­˜äº†ï¼ŒPOP_TOP</span></span><br><span class="line">genexpr([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>&lt;generator object genexpr at <span class="number">0x054EE420</span>&gt;</span><br><span class="line">list(genexpr([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br></pre></td></tr></table></figure>
<p>å« yeild çš„ç”Ÿæˆå™¨è¡¨è¾¾å¼ ((yield x) for x in [1,2,3]) ç›¸å½“äºå‡½æ•° ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"> </span><br></pre></td></tr></table></figure>
<p>æ­£æ˜¯ <code>(yield x)</code> é€ æˆçš„ï¼Œè¿™ä½¿å¾—å†…éƒ¨å‡½æ•°æœ‰ä¸¤ä¸ªè¿ç»­çš„ YIELD_VALUE</p>
<p>å¤–ç•Œä¼ è¿›æ¥çš„å€¼ï¼ˆè¿™é‡Œæ˜¯Noneï¼‰æ¥ä¸åŠ POP_TOP å°±è¢« YIELD_VALUE ä¼ é€’å‡ºå»äº†ï¼</p>
<p>æœ€ç»ˆå¤–ç•Œçš„ list ä¼šæ‹¿åˆ°è‡ªå·±ä¼ è¿›å»çš„None</p>
</li>
<li>
<p>æˆ‘ä»¬ä¸åº”è¯¥åœ¨åˆ—è¡¨ï¼ˆé›†åˆã€å­—å…¸ï¼‰æ¨å¯¼å¼æˆ–ç”Ÿæˆå™¨è¡¨è¾¾å¼ä¸­ä½¿ç”¨ yieldï¼Œæœ‰æ—¶ä¼šå¸¦æ¥æ„æƒ³ä¸åˆ°çš„ç»“æœ</p>
<p>è¿™å…¶å®æ˜¯ Python æœ¬èº«çš„ä¸€ä¸ª Bugï¼Œè§ <a href="https://bugs.python.org/issue10544" target="_blank" rel="noopener">https://bugs.python.org/issue10544</a></p>
</li>
</ul>
<h3 id="mutating-the-immutable-å¼ºäººæ‰€éš¾">&gt; Mutating the immutable!/å¼ºäººæ‰€éš¾</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">some_tuple = (<span class="string">"A"</span>, <span class="string">"tuple"</span>, <span class="string">"with"</span>, <span class="string">"values"</span>)</span><br><span class="line">another_tuple = ([<span class="number">1</span>, <span class="number">2</span>], [<span class="number">3</span>, <span class="number">4</span>], [<span class="number">5</span>, <span class="number">6</span>])</span><br></pre></td></tr></table></figure>
<p><strong>Output:</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>some_tuple[<span class="number">2</span>] = <span class="string">"change this"</span></span><br><span class="line">TypeError: <span class="string">'tuple'</span> object does <span class="keyword">not</span> support item assignment</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>another_tuple[<span class="number">2</span>].append(<span class="number">1000</span>) <span class="comment"># è¿™é‡Œä¸å‡ºç°é”™è¯¯</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>another_tuple</span><br><span class="line">([<span class="number">1</span>, <span class="number">2</span>], [<span class="number">3</span>, <span class="number">4</span>], [<span class="number">5</span>, <span class="number">6</span>, <span class="number">1000</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>another_tuple[<span class="number">2</span>] += [<span class="number">99</span>, <span class="number">999</span>]</span><br><span class="line">TypeError: <span class="string">'tuple'</span> object does <span class="keyword">not</span> support item assignment</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>another_tuple</span><br><span class="line">([<span class="number">1</span>, <span class="number">2</span>], [<span class="number">3</span>, <span class="number">4</span>], [<span class="number">5</span>, <span class="number">6</span>, <span class="number">1000</span>, <span class="number">99</span>, <span class="number">999</span>])</span><br></pre></td></tr></table></figure>
<p>æˆ‘è¿˜ä»¥ä¸ºå…ƒç»„æ˜¯ä¸å¯å˜çš„å‘¢â€¦</p>
<h4 id="ğŸ’¡-è¯´æ˜-v15">ğŸ’¡ è¯´æ˜:</h4>
<ul>
<li>
<p>å¼•ç”¨ <a href="https://docs.python.org/2/reference/datamodel.html" target="_blank" rel="noopener">https://docs.python.org/2/reference/datamodel.html</a></p>
<blockquote>
<p>ä¸å¯å˜åºåˆ— ä¸å¯å˜åºåˆ—çš„å¯¹è±¡ä¸€æ—¦åˆ›å»ºå°±ä¸èƒ½å†æ”¹å˜. (å¦‚æœå¯¹è±¡åŒ…å«å¯¹å…¶ä»–å¯¹è±¡çš„å¼•ç”¨ï¼Œåˆ™è¿™äº›å…¶ä»–å¯¹è±¡å¯èƒ½æ˜¯å¯å˜çš„å¹¶ä¸”å¯èƒ½ä¼šè¢«ä¿®æ”¹; ä½†æ˜¯ï¼Œç”±ä¸å¯å˜å¯¹è±¡ç›´æ¥å¼•ç”¨çš„å¯¹è±¡é›†åˆä¸èƒ½æ›´æ”¹.)</p>
</blockquote>
</li>
<li>
<p><code>+=</code> æ“ä½œç¬¦åœ¨åŸåœ°ä¿®æ”¹äº†åˆ—è¡¨. å…ƒç´ èµ‹å€¼æ“ä½œå¹¶ä¸å·¥ä½œ, ä½†æ˜¯å½“å¼‚å¸¸æŠ›å‡ºæ—¶, å…ƒç´ å·²ç»åœ¨åŸåœ°è¢«ä¿®æ”¹äº†.</p>
</li>
</ul>
<p>(è¯‘: å¯¹äºä¸å¯å˜å¯¹è±¡, è¿™é‡ŒæŒ‡tuple, <code>+=</code> å¹¶ä¸æ˜¯åŸå­æ“ä½œ, è€Œæ˜¯ <code>extend</code> å’Œ <code>=</code> ä¸¤ä¸ªåŠ¨ä½œ, è¿™é‡Œ <code>=</code> æ“ä½œè™½ç„¶ä¼šæŠ›å‡ºå¼‚å¸¸, ä½† <code>extend</code>æ“ä½œå·²ç»ä¿®æ”¹æˆåŠŸäº†. è¯¦ç»†è§£é‡Šå¯ä»¥çœ‹<a href="https://segmentfault.com/a/1190000010767068" target="_blank" rel="noopener">è¿™é‡Œ</a>)</p>
<p>æ¢å¥è¯è¯´ï¼Œ<code>+=</code><strong>å¹¶ä¸æ˜¯åŸå­æ“ä½œ</strong>ï¼Œç›¸å½“äºä¸‹é¢çš„ä¸¤æ­¥:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">t[2].extend([50,60])</span><br><span class="line">t[2] = t[2]</span><br></pre></td></tr></table></figure>
<p>ç¬¬ä¸€æ­¥å¯ä»¥æ­£ç¡®æ‰§è¡Œï¼Œä½†æ˜¯ç¬¬äºŒæ­¥æœ‰äº†<code>=</code>ï¼Œè‚¯å®šä¼šæŠ›å¼‚å¸¸çš„ã€‚ åŒæ ·è¿™ä¹Ÿå¯ä»¥è§£é‡Šåœ¨ä½¿ç”¨<code>+=</code>çš„æ—¶å€™ï¼Œä¸ºä½•<code>t[2]</code>çš„<code>id</code>æ˜æ˜æ²¡æœ‰å˜åŒ–ï¼Œä½†æ˜¯ä»ç„¶æŠ›å‡ºå¼‚å¸¸äº†ã€‚</p>
<h3 id="the-disappearing-variable-from-outer-scope-æ¶ˆå¤±çš„å¤–éƒ¨å˜é‡">&gt; The disappearing variable from outer scope/æ¶ˆå¤±çš„å¤–éƒ¨å˜é‡</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">e = <span class="number">7</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">raise</span> Exception()</span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>
<p><strong>Output (Python 2.x):</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(e)</span><br><span class="line"><span class="comment"># prints nothing</span></span><br></pre></td></tr></table></figure>
<p><strong>Output (Python 3.x):</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(e)</span><br><span class="line">NameError: name <span class="string">'e'</span> <span class="keyword">is</span> <span class="keyword">not</span> defined</span><br></pre></td></tr></table></figure>
<h4 id="ğŸ’¡-è¯´æ˜-v16">ğŸ’¡ è¯´æ˜:</h4>
<ul>
<li>
<p>å‡ºå¤„: <a href="https://docs.python.org/3/reference/compound_stmts.html#except" target="_blank" rel="noopener">https://docs.python.org/3/reference/compound_stmts.html#except</a></p>
<p>å½“ä½¿ç”¨ <code>as</code> ä¸ºç›®æ ‡åˆ†é…å¼‚å¸¸çš„æ—¶å€™, å°†åœ¨exceptå­å¥çš„æœ«å°¾æ¸…é™¤è¯¥å¼‚å¸¸.</p>
<p>è¿™å°±å¥½åƒ</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">except</span> E <span class="keyword">as</span> N:</span><br><span class="line">    foo</span><br></pre></td></tr></table></figure>
<p>ä¼šè¢«ç¿»è¯‘æˆ</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">except</span> E <span class="keyword">as</span> N:</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        foo</span><br><span class="line">    <span class="keyword">finally</span>:</span><br><span class="line">        <span class="keyword">del</span> N</span><br></pre></td></tr></table></figure>
<p>è¿™æ„å‘³ç€å¼‚å¸¸å¿…é¡»åœ¨è¢«èµ‹å€¼ç»™å…¶ä»–å˜é‡æ‰èƒ½åœ¨ <code>except</code> å­å¥ä¹‹åå¼•ç”¨å®ƒ. è€Œå¼‚å¸¸ä¹‹æ‰€ä»¥ä¼šè¢«æ¸…é™¤, åˆ™æ˜¯ç”±äºä¸Šé¢é™„åŠ çš„å›æº¯ä¿¡æ¯(trackback)ä¼šå’Œæ ˆå¸§(stack frame)å½¢æˆå¾ªç¯å¼•ç”¨, ä½¿å¾—è¯¥æ ˆå¸§ä¸­çš„æ‰€æœ‰æœ¬åœ°å˜é‡åœ¨ä¸‹ä¸€æ¬¡åƒåœ¾å›æ”¶å‘ç”Ÿä¹‹å‰éƒ½å¤„äºæ´»åŠ¨çŠ¶æ€.(è¯‘: ä¹Ÿå°±æ˜¯è¯´ä¸ä¼šè¢«å›æ”¶)</p>
</li>
<li>
<p>å­å¥åœ¨ Python ä¸­å¹¶æ²¡æœ‰ç‹¬ç«‹çš„ä½œç”¨åŸŸ. ç¤ºä¾‹ä¸­çš„æ‰€æœ‰å†…å®¹éƒ½å¤„äºåŒä¸€ä½œç”¨åŸŸå†…, æ‰€ä»¥å˜é‡ <code>e</code> ä¼šç”±äºæ‰§è¡Œäº† <code>except</code> å­å¥è€Œè¢«åˆ é™¤. è€Œå¯¹äºæœ‰ç‹¬ç«‹çš„å†…éƒ¨ä½œç”¨åŸŸçš„å‡½æ•°æ¥è¯´æƒ…å†µå°±ä¸ä¸€æ ·äº†. ä¸‹é¢çš„ä¾‹å­è¯´æ˜äº†è¿™ä¸€ç‚¹:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">(x)</span>:</span></span><br><span class="line">    <span class="keyword">del</span>(x)</span><br><span class="line">    print(x)</span><br><span class="line"></span><br><span class="line">x = <span class="number">5</span></span><br><span class="line">y = [<span class="number">5</span>, <span class="number">4</span>, <span class="number">3</span>]</span><br></pre></td></tr></table></figure>
<p><strong>Output:</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt;f(x)</span><br><span class="line">UnboundLocalError: local variable <span class="string">'x'</span> referenced before assignment</span><br><span class="line">&gt;&gt;&gt;f(y)</span><br><span class="line">UnboundLocalError: local variable <span class="string">'x'</span> referenced before assignment</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x</span><br><span class="line"><span class="number">5</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>y</span><br><span class="line">[<span class="number">5</span>, <span class="number">4</span>, <span class="number">3</span>]</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>åœ¨ Python 2.x ä¸­, <code>Exception()</code> å®ä¾‹è¢«èµ‹å€¼ç»™äº†å˜é‡ <code>e</code>, æ‰€ä»¥å½“ä½ å°è¯•æ‰“å°ç»“æœçš„æ—¶å€™, å®ƒçš„è¾“å‡ºä¸ºç©º.ï¼ˆè¯‘: æ­£å¸¸çš„Exceptionå®ä¾‹æ‰“å°å‡ºæ¥å°±æ˜¯ç©ºï¼‰</p>
<p><strong>Output (Python 2.x):</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>e</span><br><span class="line">Exception()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> e</span><br><span class="line"><span class="comment"># æ²¡æœ‰æ‰“å°ä»»ä½•å†…å®¹!</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="when-true-is-actually-false-çœŸäº¦å‡">&gt; When True is actually False/çœŸäº¦å‡</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">True = False</span><br><span class="line">if True == False:</span><br><span class="line">    print(&quot;I&apos;ve lost faith in truth!&quot;)</span><br></pre></td></tr></table></figure>
<p><strong>Output:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">I&apos;ve lost faith in truth!</span><br></pre></td></tr></table></figure>
<h4 id="ğŸ’¡-è¯´æ˜-v17">ğŸ’¡ è¯´æ˜:</h4>
<ul>
<li>æœ€åˆ, Python å¹¶æ²¡æœ‰ <code>bool</code> å‹ (äººä»¬ç”¨0è¡¨ç¤ºå‡å€¼, ç”¨éé›¶å€¼æ¯”å¦‚1ä½œä¸ºçœŸå€¼). åæ¥ä»–ä»¬æ·»åŠ äº† <code>True</code>, <code>False</code>, å’Œ <code>bool</code> å‹, ä½†æ˜¯, ä¸ºäº†å‘åå…¼å®¹, ä»–ä»¬æ²¡æ³•æŠŠ <code>True</code> å’Œ <code>False</code> è®¾ç½®ä¸ºå¸¸é‡, åªæ˜¯è®¾ç½®æˆäº†å†…ç½®å˜é‡.</li>
<li>Python 3 ç”±äºä¸å†éœ€è¦å‘åå…¼å®¹, ç»ˆäºå¯ä»¥ä¿®å¤è¿™ä¸ªé—®é¢˜äº†, æ‰€ä»¥è¿™ä¸ªä¾‹å­æ— æ³•åœ¨ Python 3.x ä¸­æ‰§è¡Œ! Python 3 ä¸­ä¼šå‡ºç° <code>SyntaxError: can't assign to keyword</code> é”™è¯¯</li>
</ul>
<h3 id="from-filled-to-none-in-one-instruction-ä»æœ‰åˆ°æ— ">&gt; From filled to None in one instructionâ€¦/ä»æœ‰åˆ°æ— â€¦</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">some_list = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">some_dict = &#123;</span><br><span class="line">  <span class="string">"key_1"</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="string">"key_2"</span>: <span class="number">2</span>,</span><br><span class="line">  <span class="string">"key_3"</span>: <span class="number">3</span></span><br><span class="line">&#125;</span><br><span class="line">print(id(some_list),id(some_dict))</span><br><span class="line">print(some_list)</span><br><span class="line">print(some_dict)</span><br><span class="line"></span><br><span class="line">some_list1 = some_list.append(<span class="number">4</span>)</span><br><span class="line">some_dict1 = some_dict.update(&#123;<span class="string">"key_4"</span>: <span class="number">4</span>&#125;)</span><br><span class="line">print(id(some_list1),id(some_dict1))</span><br><span class="line">print(some_list1)</span><br><span class="line">print(some_dict1)</span><br><span class="line"></span><br><span class="line">print(some_list)</span><br><span class="line">print(some_dict)</span><br></pre></td></tr></table></figure>
<p><strong>Output:</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">(<span class="number">139974154577824</span>, <span class="number">139974154583408</span>)</span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">&#123;<span class="string">'key_1'</span>: <span class="number">1</span>, <span class="string">'key_3'</span>: <span class="number">3</span>, <span class="string">'key_2'</span>: <span class="number">2</span>&#125;</span><br><span class="line">(<span class="number">139974153481728</span>, <span class="number">139974153481728</span>)</span><br><span class="line"><span class="keyword">None</span></span><br><span class="line"><span class="keyword">None</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line">&#123;<span class="string">'key_4'</span>: <span class="number">4</span>, <span class="string">'key_1'</span>: <span class="number">1</span>, <span class="string">'key_3'</span>: <span class="number">3</span>, <span class="string">'key_2'</span>: <span class="number">2</span>&#125;</span><br></pre></td></tr></table></figure>
<h4 id="ğŸ’¡-è¯´æ˜-v18">ğŸ’¡ è¯´æ˜:</h4>
<p>å¤§å¤šæ•°ä¿®æ”¹åºåˆ—/æ˜ å°„å¯¹è±¡çš„æ–¹æ³•, æ¯”å¦‚ <code>list.append</code>, <code>dict.update</code>, <code>list.sort</code> ç­‰ç­‰. éƒ½æ˜¯åŸåœ°ä¿®æ”¹å¯¹è±¡å¹¶è¿”å› <code>None</code>. è¿™æ ·åšçš„ç†ç”±æ˜¯, å¦‚æœæ“ä½œå¯ä»¥åŸåœ°å®Œæˆ, å°±å¯ä»¥é¿å…åˆ›å»ºå¯¹è±¡çš„å‰¯æœ¬æ¥æé«˜æ€§èƒ½.</p>
<h3 id="subclass-relationships-å­ç±»å…³ç³»">&gt; Subclass relationships/å­ç±»å…³ç³» *</h3>
<p><strong>Output:</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> collections <span class="keyword">import</span> Hashable</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>issubclass(list, object)</span><br><span class="line"><span class="keyword">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>issubclass(object, Hashable)</span><br><span class="line"><span class="keyword">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>issubclass(list, Hashable)</span><br><span class="line"><span class="keyword">False</span></span><br></pre></td></tr></table></figure>
<p>å­ç±»å…³ç³»åº”è¯¥æ˜¯å¯ä¼ é€’çš„, å¯¹å§? (å³, å¦‚æœ <code>A</code> æ˜¯ <code>B</code> çš„å­ç±», <code>B</code> æ˜¯ <code>C</code> çš„å­ç±», é‚£ä¹ˆ <code>A</code> <em>åº”è¯¥</em> æ˜¯ <code>C</code> çš„å­ç±».)</p>
<h4 id="ğŸ’¡-è¯´æ˜-v19">ğŸ’¡ è¯´æ˜:</h4>
<ul>
<li>Python ä¸­çš„å­ç±»å…³ç³»å¹¶ä¸å¿…é¡»æ˜¯ä¼ é€’çš„. ä»»ä½•äººéƒ½å¯ä»¥åœ¨å…ƒç±»ä¸­éšæ„å®šä¹‰ <code>__subclasscheck__</code>.</li>
<li>å½“ <code>issubclass(cls, Hashable)</code> è¢«è°ƒç”¨æ—¶, å®ƒåªæ˜¯åœ¨ <code>cls</code> ä¸­å¯»æ‰¾ â€œ<code>__hash__</code>â€ æ–¹æ³•æˆ–ç»§æ‰¿è‡ª&quot;<code>__hash__</code>&quot;çš„æ–¹æ³•.</li>
<li>ç”±äº <code>object</code> is å¯æ•£åˆ—çš„(hashable), ä½†æ˜¯ <code>list</code> æ˜¯ä¸å¯æ•£åˆ—çš„, æ‰€ä»¥å®ƒæ‰“ç ´äº†è¿™ç§ä¼ é€’å…³ç³».</li>
</ul>
<h3 id="the-mysterious-key-type-conversion-ç¥ç§˜çš„é”®å‹è½¬æ¢">&gt; The mysterious key type conversion/ç¥ç§˜çš„é”®å‹è½¬æ¢ *</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SomeClass</span><span class="params">(str)</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">some_dict = &#123;<span class="string">'s'</span>:<span class="number">42</span>&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Output:</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>type(list(some_dict.keys())[<span class="number">0</span>])</span><br><span class="line">str</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s = SomeClass(<span class="string">'s'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>some_dict[s] = <span class="number">40</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>some_dict <span class="comment"># é¢„æœŸ: ä¸¤ä¸ªä¸åŒçš„é”®å€¼å¯¹</span></span><br><span class="line">&#123;<span class="string">'s'</span>: <span class="number">40</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>type(list(some_dict.keys())[<span class="number">0</span>])</span><br><span class="line">str</span><br></pre></td></tr></table></figure>
<h4 id="ğŸ’¡-è¯´æ˜-v20">ğŸ’¡ è¯´æ˜:</h4>
<ul>
<li>
<p>ç”±äº <code>SomeClass</code> ä¼šä» <code>str</code> è‡ªåŠ¨ç»§æ‰¿ <code>__hash__</code> æ–¹æ³•, æ‰€ä»¥ <code>s</code> å¯¹è±¡å’Œ <code>&quot;s&quot;</code> å­—ç¬¦ä¸²çš„å“ˆå¸Œå€¼æ˜¯ç›¸åŒçš„.</p>
</li>
<li>
<p>è€Œ <code>SomeClass(&quot;s&quot;) == &quot;s&quot;</code> ä¸º <code>True</code> æ˜¯å› ä¸º <code>SomeClass</code> ä¹Ÿç»§æ‰¿äº† <code>str</code> ç±» <code>__eq__</code> æ–¹æ³•.</p>
</li>
<li>
<p>å¯å“ˆå¸Œçš„é›†åˆï¼ˆhashed collectionsï¼‰ï¼Œéœ€è¦é›†åˆçš„å…ƒç´ å®ç°äº†eqå’Œhashï¼Œè€Œè¿™ä¸¤ä¸ªæ–¹æ³•å¯ä»¥ä½œä¸€ä¸ªå½¢è±¡çš„æ¯”å–»ï¼š<br>
å“ˆå¸Œé›†åˆå°±æ˜¯å¾ˆå¤šä¸ªæ¡¶ï¼Œä½†æ¯ä¸ªæ¡¶é‡Œé¢åªèƒ½æ”¾ä¸€ä¸ªçƒã€‚ hashå‡½æ•°çš„ä½œç”¨å°±æ˜¯æ‰¾åˆ°æ¡¶çš„ä½ç½®ï¼Œåˆ°åº•æ˜¯å‡ å·æ¡¶ã€‚ eqå‡½æ•°çš„ä½œç”¨å°±æ˜¯å½“æ¡¶é‡Œé¢å·²ç»æœ‰ä¸€ä¸ªçƒäº†ï¼Œä½†åˆæ¥äº†ä¸€ä¸ªçƒï¼Œå®ƒå£°ç§°å®ƒä¹Ÿåº”è¯¥è£…è¿›è¿™ä¸ªæ¡¶é‡Œé¢ï¼ˆhashå‡½æ•°ç»™å®ƒè¯´äº†æ¡¶çš„ä½ç½®ï¼‰ï¼ŒåŒæ–¹åƒµæŒä¸ä¸‹ï¼Œé‚£å°±å¾—ç”¨eqå‡½æ•°æ¥åˆ¤æ–­è¿™ä¸¤ä¸ªçƒæ˜¯ä¸æ˜¯ç›¸ç­‰çš„ï¼ˆequalï¼‰ï¼Œå¦‚æœæ˜¯åˆ¤æ–­æ˜¯ç›¸ç­‰çš„ï¼Œé‚£ä¹ˆåæ¥é‚£ä¸ªçƒå°±ä¸åº”è¯¥æ”¾è¿›æ¡¶é‡Œï¼Œå“ˆå¸Œé›†åˆç»´æŒç°çŠ¶.</p>
</li>
<li>
<p>ç”±äºä¸¤è€…çš„å“ˆå¸Œå€¼ç›¸åŒä¸”ç›¸ç­‰, æ‰€ä»¥å®ƒä»¬åœ¨å­—å…¸ä¸­è¡¨ç¤ºç›¸åŒçš„é”®.</p>
</li>
<li>
<p>å¦‚æœæƒ³è¦å®ç°æœŸæœ›çš„åŠŸèƒ½, æˆ‘ä»¬å¯ä»¥é‡å®šä¹‰ <code>SomeClass</code> çš„ <code>__eq__</code> æ–¹æ³•.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SomeClass</span><span class="params">(str)</span>:</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">__eq__</span><span class="params">(self, other)</span>:</span></span><br><span class="line">      <span class="keyword">return</span> (</span><br><span class="line">          type(self) <span class="keyword">is</span> SomeClass</span><br><span class="line">          <span class="keyword">and</span> type(other) <span class="keyword">is</span> SomeClass</span><br><span class="line">          <span class="keyword">and</span> super().__eq__(other)</span><br><span class="line">      )</span><br><span class="line"></span><br><span class="line">  <span class="comment"># å½“æˆ‘ä»¬è‡ªå®šä¹‰ __eq__ æ–¹æ³•æ—¶, Python ä¸ä¼šå†è‡ªåŠ¨ç»§æ‰¿ __hash__ æ–¹æ³•</span></span><br><span class="line">  <span class="comment"># æ‰€ä»¥æˆ‘ä»¬ä¹Ÿéœ€è¦å®šä¹‰å®ƒ</span></span><br><span class="line">  __hash__ = str.__hash__</span><br><span class="line"></span><br><span class="line">some_dict = &#123;<span class="string">'s'</span>:<span class="number">42</span>&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Output:</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>s = SomeClass(<span class="string">'s'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>some_dict[s] = <span class="number">40</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>some_dict</span><br><span class="line">&#123;<span class="string">'s'</span>: <span class="number">40</span>, <span class="string">'s'</span>: <span class="number">42</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>keys = list(some_dict.keys())</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>type(keys[<span class="number">0</span>]), type(keys[<span class="number">1</span>])</span><br><span class="line">(__main__.SomeClass, str)</span><br></pre></td></tr></table></figure></li>
</ul>

      
      
    </div>
    <footer class="article-footer">
      <ul class="article-meta">
        <li>
          <span class="label">Published Date:</span>
          <a href="/2018/12/13/What-the-f-ck-Python/" class="article-date">
  <time datetime="2018-12-13T12:56:05.000Z" itemprop="datePublished">2018-12-13</time>
</a>

        </li>
        
        
        <hr/>
      </ul>
    </footer>
  </div>
  
    
<nav id="article-nav" class="article-nav">
  
    <a href="/2019/01/09/python-åŠ¨æ€ç”Ÿæˆå˜é‡åä»¥åŠåŠ¨æ€è·å–å˜é‡çš„å˜é‡å/" id="article-nav-newer" class="article-nav-link-wrap newer">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          python--åŠ¨æ€ç”Ÿæˆå˜é‡åä»¥åŠåŠ¨æ€è·å–å˜é‡çš„å˜é‡å
        
      </div>
    </a>
  
  
    <a href="/2018/09/08/æ•°æ®æŒ–æ˜/" id="article-nav-older" class="article-nav-link-wrap older">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">æ•°æ®æŒ–æ˜</div>
    </a>
  
</nav>


  
</article>










      </div>
      
    <footer id="footer" class="post-footer footer">
      
      <hr/>
      <div id="footerContent" class="footer-content">
        <p>writingâ€¦</p>


      </div>
    </footer>

      







<script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>


  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3/dist/jquery.fancybox.min.css">
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>


<script src="/js/typing.js"></script>
<!--[if lt IE 9]><script src="https://cdn.jsdelivr.net/npm/html5shiv@3/dist/html5shiv.min.js"></script><![endif]-->







    </div>
  </body>
</html>
